<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Startseite - GeoDrop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.0.0/dist/jsQR.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            background-color: #1a202c;
            color: #e2e8f0;
        }
        
        .page {
            display: flex;
            width: 100%;
            min-height: calc(100vh - 128px);
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
            padding: 1rem;
            box-sizing: border-box;
        }
        
        main {
            padding-top: 64px;
            padding-bottom: 64px;
        }
    </style>
</head>
<body>
    <main>
        <div id="startseite" class="page" style="background-image: url('../images/startseite-bg.png'); background-size: cover; background-position: center; background-attachment: scroll; background-repeat: no-repeat; min-height: 100vh; position: relative;">
            <!-- Removed overlay to show background image clearly -->
            
            <div class="max-w-4xl mx-auto p-6 relative" style="z-index: 10;">
                <!-- Content -->
                <div class="relative z-10">
                    <div class="text-center mb-8 mt-16">
                        <!-- Language Switcher -->
                        <div class="flex justify-center mb-4">
                            <div class="flex space-x-2 bg-gray-800/50 backdrop-blur-sm rounded-lg p-2">
                                <button onclick="switchLanguage('de')" id="lang-de-btn" class="px-3 py-1 rounded text-white font-semibold hover:bg-white/30 transition-all text-sm bg-white/30">
                                    🇩🇪
                                </button>
                                <button onclick="switchLanguage('en')" id="lang-en-btn" class="px-3 py-1 rounded text-white font-semibold hover:bg-white/30 transition-all text-sm">
                                    🇺🇸
                                </button>
                            </div>
                        </div>
                        
                        <h2 class="text-4xl font-bold text-white mb-2" data-translate="startseite-title">GeoDrop</h2>
                        <p class="text-gray-300 text-lg" data-translate="startseite-subtitle">Willkommen bei der Zukunft des Geo-Minings</p>
        </div>

                <!-- Login Section -->
                <div id="login-section" class="bg-gray-700 rounded-lg p-6 mb-6" style="background: rgba(55, 65, 81, 0.8); backdrop-filter: blur(2px);">
                    <h3 class="text-xl font-semibold text-white mb-4" data-translate="login-title">🔑 Anmeldung</h3>
                    <div class="space-y-4">
                        <input type="email" id="startseite-auth-email" data-translate="email-placeholder" placeholder="E-Mail" class="w-full px-4 py-2 rounded-lg bg-gray-600 text-white border border-gray-500 focus:border-blue-500 focus:outline-none" onkeypress="if(event.key === 'Enter') login()">
                        <input type="password" id="startseite-auth-password" data-translate="password-placeholder" placeholder="Passwort" class="w-full px-4 py-2 rounded-lg bg-gray-600 text-white border border-gray-500 focus:border-blue-500 focus:outline-none" onkeypress="if(event.key === 'Enter') login()">
                        
                        <!-- REFERRAL FIELD - MUST BE VISIBLE -->
                        <div style="background: red !important; padding: 15px !important; margin: 15px 0 !important; border: 3px solid yellow !important; display: block !important; visibility: visible !important; position: relative !important; z-index: 9999 !important;">
                            <label class="block text-sm font-medium text-white mb-2" style="color: white !important; font-weight: bold !important;" data-translate="referral-label">🔗 REFERRAL-CODE (OPTIONAL)</label>
                            <input type="text" id="reg-referral" data-translate="referral-placeholder" placeholder="REFERRAL-CODE EINGEBEN" class="w-full px-4 py-3 bg-white text-black rounded-lg border border-red-500 focus:border-blue-500 focus:outline-none" style="background: white !important; color: black !important; border: 3px solid red !important; font-size: 16px !important;">
                            <p class="text-xs text-white mt-1" style="color: white !important;" data-translate="referral-hint">Du erhältst 50 PixelDrop Bonus wenn du über einen Referral-Link kommst!</p>
                        </div>
                        
                        <div class="flex space-x-2">
                            <button onclick="login()" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors" data-translate="login-button">Anmelden</button>
                            <button onclick="register()" class="flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors" data-translate="register-button">Registrieren</button>
                        </div>
                        <button onclick="resetPassword()" class="w-full px-4 py-2 text-blue-400 hover:text-blue-300 transition-colors" data-translate="forgot-password">Passwort vergessen?</button>
                        <div class="text-xs text-gray-400 mt-2" data-translate="login-tip">
                            💡 Tipp: Drücke Enter in den Eingabefeldern zum schnellen Anmelden
                        </div>
                    </div>
                </div>

                <!-- User Info -->
                <div id="user-info" class="bg-gray-700 rounded-lg p-6 mb-6" style="display: none; background: rgba(55, 65, 81, 0.8); backdrop-filter: blur(2px);">
                    <h3 class="text-xl font-semibold text-white mb-4" data-translate="user-info-title">👤 Benutzerinfo</h3>
                    <div class="mb-4 text-center">
                        <p class="text-lg font-semibold text-white" id="user-username">Lade...</p>
                        <p class="text-sm text-gray-400" data-translate="username-label">Benutzername</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                        <div>
                            <p class="text-2xl font-bold text-purple-400" id="user-coins">0</p>
                            <p class="text-sm text-gray-400" data-translate="pixeldrop-label">PixelDrop</p>
                        </div>
                        <div>
                            <p class="text-xl font-bold text-yellow-400" id="user-tbnb">0.00</p>
                            <p class="text-sm text-gray-400" data-translate="tbnb-label">tBNB</p>
                        </div>
                        <div>
                            <p class="text-2xl font-bold text-blue-400" id="user-drops">0</p>
                            <p class="text-sm text-gray-400" data-translate="drops-label">Drops</p>
                        </div>
                    </div>
                    <div class="mt-4">
                        <p class="text-lg font-semibold text-green-400" id="user-boost">1.0x</p>
                        <p class="text-sm text-gray-400" data-translate="boost-label">Boost</p>
                    </div>
                    <button onclick="logout()" class="mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors" data-translate="logout-button">Abmelden</button>
                        </div>
                    </div>
                    
                <!-- Whitepaper & Roadmap Section -->
                <div class="text-center mt-8 space-y-4">
                    <div class="flex flex-wrap gap-4 justify-center">
                        <a href="../whitepaper_alt.html" target="_blank" class="px-6 py-3 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 transition-all transform hover:scale-105 font-semibold" data-translate="whitepaper-button">
                            📖 Vollständiges Whitepaper
                        </a>
                        <button onclick="showRoadmapPopup()" class="px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all transform hover:scale-105 font-semibold" data-translate="roadmap-button">
                            🗺️ Roadmap anzeigen
                        </button>
                    </div>
                    <p class="text-gray-300 text-sm mt-4" data-translate="whitepaper-hint">
                        💡 Klicke auf "Vollständiges Whitepaper" für die detaillierte Version mit aktueller Roadmap
                    </p>
                </div>
                
            </div>
        </div>
    </main>

    <!-- Whitepaper Popup -->
    <div id="whitepaper-popup" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="sticky top-0 bg-gray-800 p-4 border-b border-gray-700 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-white" data-translate="whitepaper-popup-title">📄 GeoDrop White Paper</h2>
                    <button onclick="closeWhitePaperPopup()" class="text-gray-400 hover:text-white text-2xl font-bold">&times;</button>
                </div>
                <div class="p-6">
                    <div class="space-y-6 text-gray-300">
                        <div class="bg-gray-700 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-blue-400 mb-3" data-translate="vision-mission">🌍 Vision & Mission</h3>
                            <p class="text-sm leading-relaxed" data-translate="vision-text">
                                GeoDrop revolutioniert das Geo-Mining durch innovative Blockchain-Technologie und gamifizierte Standort-basierte Belohnungen. 
                                Unsere Mission ist es, eine dezentrale Plattform zu schaffen, die Benutzer für reale geografische Aktivitäten belohnt.
                            </p>
                </div>
                        
                        <div class="bg-gray-700 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-green-400 mb-3" data-translate="technology">⚡ Technologie</h3>
                            <p class="text-sm leading-relaxed" data-translate="tech-text">
                                <strong>Blockchain-Integration:</strong> BSC (Binance Smart Chain) für schnelle, kostengünstige Transaktionen<br>
                                <strong>GPS-Verifikation:</strong> Präzise Standortbestimmung mit Hash-basierter Verifikation<br>
                                <strong>Smart Contracts:</strong> Automatisierte Belohnungsverteilung und Drop-Verwaltung
                            </p>
                </div>
                        
                        <div class="bg-gray-700 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-purple-400 mb-3" data-translate="gameplay">🎮 Gameplay</h3>
                            <p class="text-sm leading-relaxed" data-translate="gameplay-text">
                                <strong>GeoDrops:</strong> Sammle Belohnungen an speziellen Standorten<br>
                                <strong>Mining-Maschinen:</strong> Investiere in automatische Mining-Geräte<br>
                                <strong>Leaderboard:</strong> Konkurriere mit anderen Spielern weltweit<br>
                                <strong>Daily Bonuses:</strong> Tägliche Belohnungen für aktive Teilnahme
                            </p>
                </div>
                        
                        <div class="bg-gray-700 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-yellow-400 mb-3" data-translate="tokenomics">💰 Tokenomics</h3>
                            <p class="text-sm leading-relaxed" data-translate="tokenomics-text">
                                <strong>PixelDrop Token:</strong> Hauptwährung der Plattform<br>
                                <strong>tBNB Integration:</strong> Direkte BSC-Integration für Transaktionen<br>
                                <strong>Deflationärer Mechanismus:</strong> Token-Burning bei bestimmten Aktionen<br>
                                <strong>Staking Rewards:</strong> Belohnungen für langfristige Token-Haltung
                            </p>
            </div>
            
                        <div class="text-center mt-8">
                            <button onclick="downloadWhitePaper()" class="px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all transform hover:scale-105" data-translate="download-whitepaper">
                                📥 White Paper herunterladen
                            </button>
                </div>
                </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Roadmap Popup -->
    <div id="roadmap-popup" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="sticky top-0 bg-gray-800 p-4 border-b border-gray-700 flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-white" data-translate="roadmap-popup-title">🗺️ GeoDrop Roadmap</h2>
                    <button onclick="closeRoadmapPopup()" class="text-gray-400 hover:text-white text-2xl font-bold">&times;</button>
                </div>
                <div class="p-6">
                    <div class="space-y-6 text-gray-300">
                        <div class="bg-gray-700 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-green-400 mb-3" data-translate="phase1-title">✅ Phase 1: Foundation (August 2025)</h3>
                            <p class="text-sm leading-relaxed mb-3" data-translate="phase1-desc">Grundlegende App-Struktur und Core-Features - ABGESCHLOSSEN</p>
                            <ul class="text-sm space-y-1">
                                <li>✅ Geo-Location Integration</li>
                                <li>✅ Firebase Backend Setup</li>
                                <li>✅ Basic Drop System</li>
                                <li>✅ User Authentication</li>
                                <li>✅ Interactive Map</li>
                                <li>✅ GeoChat System</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gray-700 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-green-400 mb-3" data-translate="phase2-title">✅ Phase 2: Blockchain Integration (September 2025)</h3>
                            <p class="text-sm leading-relaxed mb-3" data-translate="phase2-desc">Vollständige Blockchain-Integration und DeFi-Features - ABGESCHLOSSEN</p>
                            <ul class="text-sm space-y-1">
                                <li>✅ tBNB Integration</li>
                                <li>✅ MetaMask Wallet</li>
                                <li>✅ PixelDrop Token</li>
                                <li>✅ Smart Contracts</li>
                                <li>✅ Trading System</li>
                                <li>✅ Mining Machines</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gray-700 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-blue-400 mb-3" data-translate="phase3-title">🚧 Phase 3: Advanced Features (September 2025)</h3>
                            <p class="text-sm leading-relaxed mb-3" data-translate="phase3-desc">Erweiterte Features und Optimierungen - IN ENTWICKLUNG</p>
                            <ul class="text-sm space-y-1">
                                <li>🔄 Dev Area Erweiterung</li>
                                <li>🔄 Drop Nummerierung</li>
                                <li>🔄 Konsistenz-Checks</li>
                                <li>🔄 Admin-Tools</li>
                                <li>🔄 Performance Optimierung</li>
                                <li>🔄 Mobile Responsiveness</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gray-700 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-yellow-400 mb-3" data-translate="phase4-title">⏳ Phase 4: Future Development (Q4 2025)</h3>
                            <p class="text-sm leading-relaxed mb-3" data-translate="phase4-desc">Geplante Entwicklung und Verbesserungen</p>
                            <ul class="text-sm space-y-1">
                                <li>⏳ Enhanced Security Features</li>
                                <li>⏳ Advanced Trading Analytics</li>
                                <li>⏳ Multi-Chain Support</li>
                                <li>⏳ Improved UX/UI</li>
                                <li>⏳ Performance Monitoring</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gray-700 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-purple-400 mb-3" data-translate="phase5-title">🔮 Phase 5: Future Vision (2026)</h3>
                            <p class="text-sm leading-relaxed mb-3" data-translate="phase5-desc">Zukunftsweisende Features und Innovationen</p>
                            <ul class="text-sm space-y-1">
                                <li>⏳ AI-Powered Features</li>
                                <li>⏳ Advanced Analytics</li>
                                <li>⏳ Machine Learning</li>
                                <li>⏳ Predictive Drops</li>
                                <li>⏳ AR/VR Integration</li>
                                <li>⏳ Cross-Platform Expansion</li>
                            </ul>
                        </div>
                        
                        <div class="text-center mt-8">
                            <a href="../whitepaper_alt.html" target="_blank" class="px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all transform hover:scale-105" data-translate="show-full-roadmap">
                                📖 Vollständige Roadmap anzeigen
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../js/firebase.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/wallet-system.js"></script>
    
    <script>
        // Language System
        let currentLang = 'de'; // Default language
        
        const localTranslations = {
            de: {
                // Main Content
                'startseite-title': 'GeoDrop',
                'startseite-subtitle': 'Willkommen bei der Zukunft des Geo-Minings',
                
                // Login Section
                'login-title': '🔑 Anmeldung',
                'email-placeholder': 'E-Mail',
                'password-placeholder': 'Passwort',
                'referral-label': '🔗 REFERRAL-CODE (OPTIONAL)',
                'referral-placeholder': 'REFERRAL-CODE EINGEBEN',
                'referral-hint': 'Du erhältst 50 PixelDrop Bonus wenn du über einen Referral-Link kommst!',
                'login-button': 'Anmelden',
                'register-button': 'Registrieren',
                'forgot-password': 'Passwort vergessen?',
                'login-tip': '💡 Tipp: Drücke Enter in den Eingabefeldern zum schnellen Anmelden',
                
                // User Info
                'user-info-title': '👤 Benutzerinfo',
                'username-label': 'Benutzername',
                'pixeldrop-label': 'PixelDrop',
                'tbnb-label': 'tBNB',
                'drops-label': 'Drops',
                'boost-label': 'Boost',
                'logout-button': 'Abmelden',
                
                // Whitepaper & Roadmap
                'whitepaper-button': '📖 Vollständiges Whitepaper',
                'roadmap-button': '🗺️ Roadmap anzeigen',
                'whitepaper-hint': '💡 Klicke auf "Vollständiges Whitepaper" für die detaillierte Version mit aktueller Roadmap',
                
                // Popup Titles
                'whitepaper-popup-title': '📄 GeoDrop White Paper',
                'roadmap-popup-title': '🗺️ GeoDrop Roadmap',
                'download-whitepaper': '📥 White Paper herunterladen',
                'show-full-roadmap': '📖 Vollständige Roadmap anzeigen',
                
                // Whitepaper Content
                'vision-mission': '🌍 Vision & Mission',
                'vision-text': 'GeoDrop revolutioniert das Geo-Mining durch innovative Blockchain-Technologie und gamifizierte Standort-basierte Belohnungen. Unsere Mission ist es, eine dezentrale Plattform zu schaffen, die Benutzer für reale geografische Aktivitäten belohnt.',
                'technology': '⚡ Technologie',
                'tech-text': '<strong>Blockchain-Integration:</strong> BSC (Binance Smart Chain) für schnelle, kostengünstige Transaktionen<br><strong>GPS-Verifikation:</strong> Präzise Standortbestimmung mit Hash-basierter Verifikation<br><strong>Smart Contracts:</strong> Automatisierte Belohnungsverteilung und Drop-Verwaltung',
                'gameplay': '🎮 Gameplay',
                'gameplay-text': '<strong>GeoDrops:</strong> Sammle Belohnungen an speziellen Standorten<br><strong>Mining-Maschinen:</strong> Investiere in automatische Mining-Geräte<br><strong>Leaderboard:</strong> Konkurriere mit anderen Spielern weltweit<br><strong>Daily Bonuses:</strong> Tägliche Belohnungen für aktive Teilnahme',
                'tokenomics': '💰 Tokenomics',
                'tokenomics-text': '<strong>PixelDrop Token:</strong> Hauptwährung der Plattform<br><strong>tBNB Integration:</strong> Direkte BSC-Integration für Transaktionen<br><strong>Deflationärer Mechanismus:</strong> Token-Burning bei bestimmten Aktionen<br><strong>Staking Rewards:</strong> Belohnungen für langfristige Token-Haltung',
                
                // Roadmap Content
                'phase1-title': '✅ Phase 1: Foundation (August 2025)',
                'phase1-desc': 'Grundlegende App-Struktur und Core-Features - ABGESCHLOSSEN',
                'phase2-title': '✅ Phase 2: Blockchain Integration (September 2025)',
                'phase2-desc': 'Vollständige Blockchain-Integration und DeFi-Features - ABGESCHLOSSEN',
                'phase3-title': '🚧 Phase 3: Advanced Features (September 2025)',
                'phase3-desc': 'Erweiterte Features und Optimierungen - IN ENTWICKLUNG',
                'phase4-title': '⏳ Phase 4: Future Development (Q4 2025)',
                'phase4-desc': 'Geplante Entwicklung und Verbesserungen',
                'phase5-title': '🔮 Phase 5: Future Vision (2026)',
                'phase5-desc': 'Zukunftsweisende Features und Innovationen',
                
                // Messages
                'login-success': 'Anmeldung erfolgreich!',
                'login-error': 'Anmeldung fehlgeschlagen: ',
                'register-success': 'Registrierung erfolgreich!',
                'register-error': 'Registrierung fehlgeschlagen: ',
                'logout-success': 'Abmeldung erfolgreich!',
                'logout-error': 'Abmeldung fehlgeschlagen: ',
                'reset-success': 'Passwort-Reset E-Mail wurde gesendet!',
                'reset-error': 'Fehler beim Senden der Reset-E-Mail: ',
                'email-required': 'Bitte E-Mail und Passwort eingeben.',
                'email-only-required': 'Bitte E-Mail-Adresse eingeben.',
                'download-message': '📥 White Paper Download\n\nDas vollständige White Paper wird hier heruntergeladen.'
            },
            en: {
                // Main Content
                'startseite-title': 'GeoDrop',
                'startseite-subtitle': 'Welcome to the Future of Geo-Mining',
                
                // Login Section
                'login-title': '🔑 Login',
                'email-placeholder': 'Email',
                'password-placeholder': 'Password',
                'referral-label': '🔗 REFERRAL CODE (OPTIONAL)',
                'referral-placeholder': 'ENTER REFERRAL CODE',
                'referral-hint': 'You get 50 PixelDrop bonus if you come via a referral link!',
                'login-button': 'Login',
                'register-button': 'Register',
                'forgot-password': 'Forgot Password?',
                'login-tip': '💡 Tip: Press Enter in the input fields for quick login',
                
                // User Info
                'user-info-title': '👤 User Info',
                'username-label': 'Username',
                'pixeldrop-label': 'PixelDrop',
                'tbnb-label': 'tBNB',
                'drops-label': 'Drops',
                'boost-label': 'Boost',
                'logout-button': 'Logout',
                
                // Whitepaper & Roadmap
                'whitepaper-button': '📖 Show Complete Whitepaper',
                'roadmap-button': '🗺️ Show Roadmap',
                'whitepaper-hint': '💡 Click on "Show Complete Whitepaper" for the detailed version with current roadmap',
                
                // Popup Titles
                'whitepaper-popup-title': '📄 GeoDrop White Paper',
                'roadmap-popup-title': '🗺️ GeoDrop Roadmap',
                'download-whitepaper': '📥 Download White Paper',
                'show-full-roadmap': '📖 Show Complete Roadmap',
                
                // Whitepaper Content
                'vision-mission': '🌍 Vision & Mission',
                'vision-text': 'GeoDrop revolutionizes geo-mining through innovative blockchain technology and gamified location-based rewards. Our mission is to create a decentralized platform that rewards users for real geographic activities.',
                'technology': '⚡ Technology',
                'tech-text': '<strong>Blockchain Integration:</strong> BSC (Binance Smart Chain) for fast, cost-effective transactions<br><strong>GPS Verification:</strong> Precise location determination with hash-based verification<br><strong>Smart Contracts:</strong> Automated reward distribution and drop management',
                'gameplay': '🎮 Gameplay',
                'gameplay-text': '<strong>GeoDrops:</strong> Collect rewards at special locations<br><strong>Mining Machines:</strong> Invest in automatic mining devices<br><strong>Leaderboard:</strong> Compete with players worldwide<br><strong>Daily Bonuses:</strong> Daily rewards for active participation',
                'tokenomics': '💰 Tokenomics',
                'tokenomics-text': '<strong>PixelDrop Token:</strong> Main currency of the platform<br><strong>tBNB Integration:</strong> Direct BSC integration for transactions<br><strong>Deflationary Mechanism:</strong> Token burning on certain actions<br><strong>Staking Rewards:</strong> Rewards for long-term token holding',
                
                // Roadmap Content
                'phase1-title': '✅ Phase 1: Foundation (August 2025)',
                'phase1-desc': 'Basic app structure and core features - COMPLETED',
                'phase2-title': '✅ Phase 2: Blockchain Integration (September 2025)',
                'phase2-desc': 'Complete blockchain integration and DeFi features - COMPLETED',
                'phase3-title': '🚧 Phase 3: Advanced Features (September 2025)',
                'phase3-desc': 'Advanced features and optimizations - IN DEVELOPMENT',
                'phase4-title': '⏳ Phase 4: Future Development (Q4 2025)',
                'phase4-desc': 'Planned development and improvements',
                'phase5-title': '🔮 Phase 5: Future Vision (2026)',
                'phase5-desc': 'Future-oriented features and innovations',
                
                // Messages
                'login-success': 'Login successful!',
                'login-error': 'Login failed: ',
                'register-success': 'Registration successful!',
                'register-error': 'Registration failed: ',
                'logout-success': 'Logout successful!',
                'logout-error': 'Logout failed: ',
                'reset-success': 'Password reset email has been sent!',
                'reset-error': 'Error sending reset email: ',
                'email-required': 'Please enter email and password.',
                'email-only-required': 'Please enter email address.',
                'download-message': '📥 White Paper Download\n\nThe complete White Paper will be downloaded here.'
            }
        };
        
        // Language switching functions
        function switchLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('geodrop-language', lang);
            updateAllTexts();
            updateLanguageButtons();
        }
        
        function updateLanguageButtons() {
            const deBtn = document.getElementById('lang-de-btn');
            const enBtn = document.getElementById('lang-en-btn');
            
            if (deBtn && enBtn) {
                if (currentLang === 'de') {
                    deBtn.classList.add('bg-white/30');
                    deBtn.classList.remove('bg-transparent');
                    enBtn.classList.add('bg-transparent');
                    enBtn.classList.remove('bg-white/30');
                } else {
                    enBtn.classList.add('bg-white/30');
                    enBtn.classList.remove('bg-transparent');
                    deBtn.classList.add('bg-transparent');
                    deBtn.classList.remove('bg-white/30');
                }
            }
        }
        
        function updateAllTexts() {
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (localTranslations[currentLang] && localTranslations[currentLang][key]) {
                    if (element.tagName === 'INPUT' && element.type !== 'submit') {
                        element.placeholder = localTranslations[currentLang][key];
                    } else {
                        element.textContent = localTranslations[currentLang][key];
                    }
                }
            });
            
            // Update whitepaper links based on language
            updateWhitepaperLinks();
        }
        
        function updateWhitepaperLinks() {
            console.log('🔗 Updating whitepaper links for language:', currentLang);
            
            // Update main whitepaper button link - find by text content or position
            const whitepaperLink = document.querySelector('a[data-translate="whitepaper-button"]');
            
            if (whitepaperLink) {
                if (currentLang === 'en') {
                    whitepaperLink.href = '../english/whitepaper_tech_english.html';
                    console.log('✅ Whitepaper link set to English tech version');
                } else {
                    whitepaperLink.href = '../whitepaper_alt.html';
                    console.log('✅ Whitepaper link set to German version');
                }
            }
            
            // Update roadmap popup link (the one inside the roadmap popup)
            const roadmapPopupLink = document.querySelector('#roadmap-popup a[data-translate="show-full-roadmap"]');
            
            if (roadmapPopupLink) {
                if (currentLang === 'en') {
                    roadmapPopupLink.href = '../english/whitepaper_tech_english.html';
                    console.log('✅ Roadmap popup link set to English tech version');
                } else {
                    roadmapPopupLink.href = '../whitepaper_alt.html';
                    console.log('✅ Roadmap popup link set to German version');
                }
            }
        }
        
        // Honeypot keys for bot protection (these are fake and will be ignored)
        const fakeApiKey1 = "AIzaSyBOT_PROTECTION_FAKE_KEY_12345";
        const fakeApiKey2 = "AIzaSyFAKE_FIREBASE_KEY_67890";
        const fakeApiKey3 = "AIzaSyDUMMY_API_KEY_ABCDEF";
        
        // Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyBbaHV1OY9C_MUt4o3WTkHCGlRVt7ll9UA",
            authDomain: "geodrop-f3ee1.firebaseapp.com",
            projectId: "geodrop-f3ee1",
            storageBucket: "geodrop-f3ee1.firebasestorage.app",
            messagingSenderId: "1054615552034",
            appId: "1:1054615552034:web:8d61c64b5296f4e0cc4a7b",
            measurementId: "G-RBEJES6HX1"
        };

        // Initialize Firebase
        let app, db, storage, auth;
        
        try {
            app = firebase.initializeApp(firebaseConfig);
            db = firebase.firestore();
            storage = firebase.storage();
            auth = firebase.auth();
            console.log("✅ Firebase initialized successfully");
        } catch (error) {
            console.error("❌ Firebase initialization failed:", error);
        }
        
        // Make Firebase services globally available
        window.auth = auth;
        window.db = db;
        window.storage = storage;

        // Authentication functions
        async function login() {
            const email = document.getElementById('startseite-auth-email').value;
            const password = document.getElementById('startseite-auth-password').value;
            
            if (!email || !password) {
                showMessage(localTranslations[currentLang]['email-required'], true);
                return;
            }
            
            try {
                await auth.signInWithEmailAndPassword(email, password);
                showMessage(translations[currentLang]['login-success']);
            } catch (error) {
                console.error('Login error:', error);
                showMessage(translations[currentLang]['login-error'] + error.message, true);
            }
        }

        async function register() {
            const email = document.getElementById('startseite-auth-email').value;
            const password = document.getElementById('startseite-auth-password').value;
            
            if (!email || !password) {
                showMessage(localTranslations[currentLang]['email-required'], true);
                return;
            }
            
            try {
                await auth.createUserWithEmailAndPassword(email, password);
                showMessage(translations[currentLang]['register-success']);
            } catch (error) {
                console.error('Registration error:', error);
                showMessage(translations[currentLang]['register-error'] + error.message, true);
            }
        }

        async function logout() {
            try {
                await auth.signOut();
                showMessage(translations[currentLang]['logout-success']);
            } catch (error) {
                console.error('Logout error:', error);
                showMessage(translations[currentLang]['logout-error'] + error.message, true);
            }
        }

        async function resetPassword() {
            const email = document.getElementById('startseite-auth-email').value;
            if (!email) {
                showMessage(translations[currentLang]['email-only-required'], true);
                return;
            }
            
            try {
                await auth.sendPasswordResetEmail(email);
                showMessage(translations[currentLang]['reset-success']);
            } catch (error) {
                console.error('Password reset error:', error);
                showMessage(translations[currentLang]['reset-error'] + error.message, true);
            }
        }

        // Message function
        function showMessage(message, isError = false) {
            if (isError) {
                console.error('❌', message);
                alert('❌ ' + message);
            } else {
                console.log('✅', message);
                alert('✅ ' + message);
            }
        }

        // Navigation function
        function showPage(pageId) {
            // For standalone page, redirect to main index
            if (pageId !== 'startseite') {
                window.location.href = '../index.html#' + pageId;
            }
        }

        // Whitepaper functions
        function showWhitePaperPopup() {
            const popup = document.getElementById('whitepaper-popup');
            if (popup) {
                popup.classList.remove('hidden');
            }
        }

        function closeWhitePaperPopup() {
            const popup = document.getElementById('whitepaper-popup');
            if (popup) {
                popup.classList.add('hidden');
            }
        }

        function downloadWhitePaper() {
            alert(translations[currentLang]['download-message']);
        }

        function showRoadmapPopup() {
            const popup = document.getElementById('roadmap-popup');
            if (popup) {
                popup.classList.remove('hidden');
            }
        }

        function closeRoadmapPopup() {
            const popup = document.getElementById('roadmap-popup');
            if (popup) {
                popup.classList.add('hidden');
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🏠 Startseite geladen');
            
            // Initialize language system
            const savedLang = localStorage.getItem('geodrop-language');
            if (savedLang && (savedLang === 'de' || savedLang === 'en')) {
                currentLang = savedLang;
            }
            updateAllTexts();
            updateLanguageButtons();
            
            // Ensure whitepaper links are set correctly on page load
            setTimeout(() => {
                updateWhitepaperLinks();
            }, 100);
            
            // Process referral link immediately
            processReferralLinkOnStartseite();
            
            // Debug: Test background image loading
            const testImg = new Image();
            testImg.onload = function() {
                console.log('✅ Background image loaded successfully:', testImg.src);
            };
            testImg.onerror = function() {
                console.log('❌ Background image failed to load:', testImg.src);
            };
            testImg.src = '../images/background.png';
        });

        function processReferralLinkOnStartseite() {
            console.log('🔗 Processing referral link on startseite...');
            
            // Parse URL parameters and hash
            const urlParams = new URLSearchParams(window.location.search);
            const hashParams = new URLSearchParams(window.location.hash.substring(1));
            
            let refCode = urlParams.get('ref') || urlParams.get('referral') || 
                         hashParams.get('ref') || hashParams.get('referral');
            
            // Also check for path-based referral (e.g., /ref/username)
            if (!refCode && window.location.pathname.includes('/ref/')) {
                const pathParts = window.location.pathname.split('/ref/');
                if (pathParts.length > 1) {
                    refCode = pathParts[1].split('/')[0];
                }
            }
            
            // Use default referral code if none found
            if (!refCode) {
                refCode = '2b2MBGHgaDTcSOaMzepTnGK2JVz1'; // Default referral code
                console.log('🔗 No referral code found, using default:', refCode);
            } else {
                console.log('🔗 Referral code found:', refCode);
            }
            
            // Store in localStorage
            localStorage.setItem('referralCode', refCode);
            console.log('💾 Referral code stored in localStorage:', refCode);
            
            // Auto-fill the referral field
            const referralField = document.getElementById('reg-referral');
            if (referralField) {
                referralField.value = refCode;
                console.log('✅ Referral field auto-filled with:', refCode);
            } else {
                console.log('❌ Referral field not found!');
            }
        }
    </script>
</body>
</html>