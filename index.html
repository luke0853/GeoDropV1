<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- SECURITY: Content Security Policy - temporarily relaxed for development -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https: blob:; connect-src 'self' https: wss:; font-src 'self' https:;">
    <title>GeoDrop App V2</title>
    
    <link rel="icon" type="image/png" sizes="32x32" href="images/logo3.1-removebg-preview.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/logo3.1-removebg-preview.png">
    <link rel="shortcut icon" href="images/logo3.1-removebg-preview.png">
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#3b82f6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="GeoDrop">
    <link rel="apple-touch-icon" href="images/logo3.1-removebg-preview.png">

    <script>
        // Language System
        let currentLang = 'de'; // Default language
        
        // Make currentLang globally available
        window.currentLang = currentLang;
        
        const translations = {
            de: {
                // Banner
                'banner-earn': '💰 Verdiene Geld mit Gaming!',
                
                // Navigation
                'startseite': 'Home',
                'geocard': 'GeoCard',
                'geoboard': 'GeoBoard',
                'mining': 'Mining',
                'bonus': 'Bonus',
                'geochat': 'GeoChat',
                'trading': 'Trading',
                'mehr': 'Mehr',
                'dev': 'Dev',
                'machines': 'Mining',
                
                // Landing Page
                'welcome-title': 'Willkommen in der Zukunft des Geo-Minings',
                'whitepaper-title': '📖 Vollständiges Whitepaper anzeigen',
                'main-whitepaper': '📄 Haupt-Whitepaper',
                'alt-whitepaper': '📋 Alternative Version',
                'whitepaper-instruction': '💡 Klicke auf die Buttons um die vollständigen Whitepaper-Dokumente in neuen Tabs zu öffnen',
                'mobile-users': '📱 Mobile Nutzer: Die Whitepaper öffnen sich in neuen Browser-Tabs. Du kannst zwischen den Tabs wechseln oder die App im Hintergrund lassen.',
                
                // Content
                'what-is-geodrop': '🎯 Was ist GeoDrop?',
                'what-is-geodrop-desc': 'GeoDrop ist eine innovative Blockchain-basierte App, die Geocaching mit Kryptowährungen verbindet. Benutzer können virtuelle "Drops" an realen Orten platzieren und Belohnungen durch das Abschließen von Aufgaben verdienen.',
                
                'technology-title': '🔧 Technologie (Status: September 2025)',
                'blockchain': 'Blockchain: tBNB-basierte Smart Contracts mit PixelDrop Token',
                'trading-system': 'Trading System: Vollständiges DeFi-Trading zwischen PixelDrop ↔ tBNB',
                'mining-machines': 'Mining-Maschinen: 4 verschiedene Maschinentypen mit Boost-System',
                'gps': 'GPS: Präzise Standortbestimmung mit 20m Genauigkeit',
                'firebase': 'Firebase: Echtzeitdatenbank für Drops und User-Interaktionen',
                'dev-area': 'Dev Area: Erweiterte Admin-Tools und Drop-Management',
                'bonus-system': 'Bonus System: Tägliche Belohnungen mit Spezialeffekten',
                'pwa-support': 'PWA-Unterstützung: Installierbare Web-App für mobile Geräte',
                'realtime-updates': 'Echtzeit-Updates: Live-Updates für alle App-Funktionen',
                
                'gameplay-title': '🎮 Gameplay',
                'gameplay-desc': 'Benutzer navigieren zu GeoDrops, machen Fotos vom Standort und erhalten Belohnungen in Form von Kryptowährungen. Das System verhindert Betrug durch GPS-Validierung und Bildanalyse.',
                
                'security-title': '🔒 Sicherheit',
                'security-decentralized': 'Dezentrale Blockchain-Architektur',
                'security-smart-contracts': 'Smart Contract-basierte Belohnungen',
                'security-anti-cheat': 'Anti-Cheat-Systeme',
                'security-encryption': 'Verschlüsselte Datenübertragung',
                
                // Buttons
                'login': 'Anmelden',
                'register': 'Registrieren',
                
                // Additional missing translations
                'geodrop-title': '🌍 GeoDrop',
                'geodrop-subtitle': 'Willkommen in der Zukunft des Geo-Minings',
                'user-info': '👤 Benutzer-Info',
                'email': 'E-Mail:',
                'username': 'Benutzername:',
                'level': 'Level:',
                'coins': 'Coins:',
                'drops': 'Drops:',
                'boost': 'Boost:',
                'username-placeholder': 'Wähle deinen Username',
                'email-placeholder': 'deine@email.com',
                
                // Hero Section
                'future-title': 'Die Zukunft des',
                'future-subtitle': 'Geo-Minings',
                'hero-description': 'Verdiene Kryptowährungen durch Geocaching! Entdecke virtuelle Drops an echten Orten und sammle Belohnungen mit innovativer Blockchain-Technologie.',
                'register-free': 'Kostenlos registrieren',
                'learn-more': 'Mehr erfahren',
                
                // Statistics
                'active-users': 'Aktive User',
                'geodrops': 'GeoDrops',
                'paid-out': 'Ausgezahlt',
                
                // Cards
                'geodrop-found': 'GeoDrop gefunden!',
                'daily-bonus': 'Täglicher Bonus',
                'referral-bonus': 'Empfehlungsbonus',
                'referral-desc': '+5% von Käufen',
                
                // Additional missing translations
                'ready-future': 'Bereit für die Zukunft des Geo-Minings?',
                'join-thousands': 'Schließe dich Tausenden von Nutzern an und verdiene Kryptowährungen durch Geocaching!',
                'how-it-works': 'Wie es funktioniert',
                '4-simple-steps': 'In 4 einfachen Schritten zu deinen ersten Kryptowährungen',
                'find-drops': 'Drops finden',
                'find-drops-desc': 'Nutze die Karte um GeoDrops in deiner Nähe zu entdecken.',
                'take-photos': 'Fotos machen',
                'take-photos-desc': 'Mache ein Foto vom Standort und bestätige deine Anwesenheit.',
                'referral-system': 'Empfehlungssystem',
                'earn-with-friends': 'Verdiene mit jedem Freund, den du einlädst',
                '2-level-system': '🎯 2-Ebenen System',
                'referral-bonus-text': 'Du erhältst 50 PixelDrop Startbonus!',
                'referral-code-label': '🔗 EMPFEHLUNGSCODE (OPTIONAL)',
                'referral-code-placeholder': 'EMPFEHLUNGSCODE EINGEBEN',
                'referral-bonus-desc': 'Du erhältst 50 PixelDrop Bonus wenn du über einen Empfehlungslink kommst!',
                'already-registered': 'Bereits registriert? Hier anmelden',
                'already-registered-text': 'Bereits registriert?',
                'login-here': 'Hier anmelden',
                'new-crypto-chance': '🚀 Neue Krypto-Chance - Jetzt starten!',
                'whitepaper-desc': 'Erfahre mehr über das GeoDrop-Konzept und die dahinterstehende Technologie.',
                'read-whitepaper': 'Whitepaper lesen',
                'show-roadmap': 'Roadmap anzeigen',
                'tokenomics': 'Tokenomics',
                'register-now': '🚀 Jetzt registrieren',
                'create-account': 'Erstelle deinen Account und starte sofort!',
                'login-title': '🔑 Anmelden',
                'welcome-back': 'Willkommen zurück!',
                'login-button': 'Anmelden',
                'dev': 'Dev',
                'best-game': '🎮 Best Idle-RPG Game! - Jetzt spielen!',
                'password-placeholder': 'Mindestens 6 Zeichen',
                'email-label': 'E-Mail',
                'password-label': 'Passwort',
                'username-label': 'Benutzername',
                'step1-title': 'Registrieren',
                'step1-desc': 'Erstelle kostenlos deinen Account und verbinde dein MetaMask Wallet.',
                'step4-title': 'Belohnung erhalten',
                'step4-desc': 'Erhalte PixelDrop Tokens direkt in dein Wallet.',
                
                // Feature Cards
                'what-can-geodrop': 'Was kann GeoDrop?',
                'discover-features': 'Entdecke die revolutionären Features der Geo-Mining App',
                'gps-mining': 'GPS-basiertes Mining',
                'gps-mining-desc': 'Finde virtuelle Drops an echten Orten und verdiene Kryptowährungen durch Geocaching-Aktivitäten.',
                'mining-machines-feature': 'Mining-Maschinen',
                'mining-machines-desc': '4 verschiedene Maschinentypen für passives Einkommen. Von Basic bis Mega Miner mit verschiedenen Boosts.',
                'defi-trading': 'DeFi Trading',
                'defi-trading-desc': 'Handele PixelDrop ↔ tBNB direkt in der App. Vollständiges DeFi-Trading mit Smart Contracts.',
                'daily-bonuses': 'Tägliche Boni',
                'daily-bonuses-desc': 'Sammle täglich 50 PixelDrop als Login-Bonus. Spezialeffekte und Animationen inklusive.',
                'referral-system-feature': 'Empfehlungssystem',
                'referral-system-desc': 'Lade Freunde ein und verdiene 5% ihres Einkommens. 2. Stufe: 1% zusätzlich.',
                'pwa-support': 'PWA-Unterstützung',
                'pwa-support-desc': 'Installierbare Web-App für mobile Geräte. Funktioniert offline und wie eine native App.',
                
                // GeoCard translations
                'geocard-title': '🗺️ GeoCard',
                'interactive-map': '🌍 Interaktive Karte',
                'map-legend-button': '🗺️ Karten-Legende anzeigen',
                'drop-rules-button': '📋 Drop-Regeln',
                'user-drop-button': '➕ User Drop erstellen',
                'location-title': '📍 Standort',
                'use-my-location': '📍 Meinen Standort verwenden',
                'location-info-default': 'Klicke auf den Button um deine aktuelle Position zu laden',
                'photo-upload-title': '📸 Foto-Upload',
                'select-geodrop': 'GeoDrop auswählen:',
                'user-drops': '👤 User Drops',
                'dev-drops': '🎯 Dev Drops',
                'select-dev-geodrop': 'Dev GeoDrop auswählen...',
                'select-user-geodrop': 'User GeoDrop auswählen...',
                'dev-drop-1': '🎯 Dev GeoDrop1 - 100 PixelDrops',
                'dev-drop-2': '🎯 Dev GeoDrop2 - 100 PixelDrops',
                'dev-drop-3': '🎯 Dev GeoDrop3 - 100 PixelDrops',
                'dev-drop-4': '🎯 Dev GeoDrop4 - 100 PixelDrops',
                'dev-drop-5': '🎯 Dev GeoDrop5 - 100 PixelDrops',
                'dev-drop-6': '🎯 Dev GeoDrop6 - 100 PixelDrops',
                'dev-drop-7': '🎯 Dev GeoDrop7 - 100 PixelDrops',
                'dev-drop-8': '🎯 Dev GeoDrop8 - 100 PixelDrops',
                'map-legend-title': '🗺️ Karten-Legende',
                'your-location': 'Dein Standort',
                'your-location-desc': 'Deine aktuelle GPS-Position',
                'take-photo': '📸 Foto aufnehmen',
                'upload-debug': '🔍 Upload Debug',
                
                // Additional GeoCard translations
                'latitude': 'Breitengrad',
                'longitude': 'Längengrad',
                'latitude-lat': 'Breitengrad (Lat)',
                'longitude-lng': 'Längengrad (Lng)',
                'dev-latitude': 'Dev Breitengrad',
                'dev-longitude': 'Dev Längengrad',
                'reload-drops': '🔄 Drops neu laden',
                'save-changes': '✅ Änderungen speichern',
                'latitude-placeholder': 'z.B. 52.520008',
                'longitude-placeholder': 'z.B. 13.404954',
                'no-dev-drops': 'Keine Dev GeoDrops gefunden',
                'error-loading-dev-drops': 'Fehler beim Laden der Dev GeoDrops',
                'legend-collected-today': 'Heute gesammelt',
                'legend-collected-today-desc': 'Graue Dart-Scheibe - Heute bereits gesammelt',
                'legend-normal-drops': 'Normale GeoDrops',
                'legend-normal-drops-desc': 'Kleine Dart-Scheibe - Offizielle GeoDrops',
                'legend-user-drops': 'User GeoDrops',
                'legend-user-drops-desc': 'Mittlere Größe - Von Spielern erstellte GeoDrops',
                'legend-dev-drops': 'Dev GeoDrop',
                'legend-dev-drops-desc': 'Größere Dart-Scheibe (2.5x größer) - Entwickler-Test-Drops',
                'dev-drops-legend': '🎯 Dev GeoDrops',
                'user-drops-legend': '🌍 User GeoDrops',
                
                // User Drop Modal translations
                'drop-name': '🎯 Drop Name:',
                'drop-name-placeholder': 'z.B. Historisches Gebäude',
                'what-to-photograph': '📸 Was soll fotografiert werden:',
                'photograph-description-placeholder': 'Beschreibe genau, was an diesem Standort fotografiert werden soll...',
                'reference-image-upload': '📷 Referenzbild hochladen:',
                'choose-file': 'Datei auswählen',
                'no-file-selected': 'Keine ausgewählt',
                'reference-image-description': 'Lade ein Referenzbild hoch, das zeigt was fotografiert werden soll',
                'reward-pixeldrops': '💰 Belohnung (PixelDrops):',
                'user-drops-fixed': 'User Drops sind auf 10 PixelDrops fixiert',
                'location': '📍 Standort:',
                'use-current-position': 'Aktuelle Position verwenden',
                'location-auto-description': 'Standort wird automatisch von deiner aktuellen Position übernommen',
                'create-user-drop': '✔ User Drop erstellen',
                'cancel': '✗ Abbrechen',
                'create-user-drop-title': '➕ User GeoDrop erstellen',
                'latitude': 'Breitengrad',
                'longitude': 'Längengrad',
                'dev-test-coordinates': '🔧 DEV: Test-Koordinaten:',
                'dev-latitude': 'Dev Breitengrad',
                'dev-longitude': 'Dev Längengrad',
                'dev-test-warning': '⚠️ Nur für Dev-Tests - normale User sehen dies nicht!',
                
                // Additional missing translations
                'your-location': 'Dein Standort',
                'accuracy': 'Genauigkeit:',
                'time': 'Zeit:',
                'location-found': 'Standort gefunden:',
                'current-position': 'Aktuelle Position',
                'user-mode': 'USER MODUS (Dev deaktiviert)',
                'adjust-coordinates': 'Koordinaten anpassen',
                'reset': 'Zurücksetzen',
                
                // GeoDrops Table
                'geodrops-overview': '📋 GeoDrops Übersicht',
                'dev-geodrops': '🎯 Dev GeoDrops',
                'user-geodrops': '👤 User GeoDrops',
                'table-number': 'Nr.',
                'table-creator': 'Ersteller',
                'table-reward': 'Reward',
                'table-status': 'Status',
                'table-type': 'Typ',
                'table-icon': 'Icon',
                'table-coordinates': 'Koordinaten',
                'table-created': 'Erstellt',
                'table-actions': 'Aktionen',
                'status-active': '✅ Aktiv',
                'status-inactive': '❌ Inaktiv',
                'please-login': 'Bitte zuerst anmelden',
                'no-user-drops': 'Keine User GeoDrops gefunden',
                'error-loading-user-drops': 'Fehler beim Laden der User GeoDrops',
                'error-loading-geodrops': 'Fehler beim Laden der GeoDrops',
                'loading-dev-drops-table': 'Lade Dev GeoDrops-Tabelle...',
                'user-drops-displayed': '👤 User GeoDrops angezeigt',
                'dev-drops-displayed': '🎯 Dev GeoDrops angezeigt',
                'modal-not-found': '❌ Modal nicht gefunden',
                'cleanup-duplicates': '🧹 Duplikate bereinigen',
                'reload-all-lists': '🔄 Alle Listen neu laden',
                'dev-test-warning': '⚠️ Nur für Dev-Tests - normale User sehen dies nicht!',
                'end-dev-session': '🔒 Dev-Session beenden',
                'status-claimed': '❌ Gesammelt',
                'status-available': '✅ Verfügbar',
                'status-claimed-today': '⏰ Heute gesammelt',
                'selected-for-upload': 'für Upload ausgewählt',
                
                // Dev Coordinates Section
                'dev-coordinates-title': '🎯 Dev Koordinaten-Anpassung',
                'admin-status': 'Admin-Status:',
                'admin-active': 'Aktiv',
                'admin-inactive': 'Inaktiv (nur mit Admin-Passwort)',
                'dev-coords-status': 'Dev-Koordinaten:',
                'dev-coords-not-set': 'Nicht gesetzt',
                'dev-coords-set': 'Gesetzt',
                'admin-required': '🔒 Admin-Modus erforderlich',
                'admin-mode-disable': '🔓 Admin-Modus deaktivieren',
                'admin-mode-enable': '🔓 Admin-Modus aktivieren',
                'dev-drop-create': '🎯 Dev Drop erstellen',
                'dev-test-coordinates': '🔧 DEV: Test-Koordinaten eingeben:',
                'set-test-coordinates': '📍 Test-Koordinaten setzen',
                'create-test-melk': '🏛️ Test-Drop: Stift Melk erstellen',
                'create-test-schonbrunn': '🏰 Test-Drop: Schloss Schönbrunn erstellen',
                'create-all-states': '🇦🇹 Alle 9 Bundesländer-Drops erstellen',
                'create-remaining-states': '🚀 Restliche 8 Bundesländer-Drops erstellen',
                'clear-user-drops': '🧹 User Drop Listen leeren',
                'restore-user-drops': '🔄 User Drop Listen wiederherstellen',
                'check-user-drop-count': '📊 User Drop Anzahl prüfen',
                'create-missing-drop1': '🏛️ Drop Nr. 1 (Stift Melk) erstellen',
                
                // Additional missing translations
                'zoom': 'Zoom:',
                'dev-latitude-label': 'Dev Breitengrad',
                'dev-longitude-label': 'Dev Längengrad',
                
                // Map and Table translations
                'dev-coordinate-adjustment': 'Dev Koordinaten-Anpassung',
                'admin-mode-required': 'Admin-Modus erforderlich',
                'current-position': 'Aktuelle Position',
                'admin-status': 'Admin-Status:',
                'dev-coordinates': 'Dev-Koordinaten:',
                'geodrops-overview': 'GeoDrops Übersicht',
                'dev-geodrops-tab': '🎯 Dev GeoDrops',
                'user-geodrops-tab': '👤 User GeoDrops',
                'reload-drops-tab': '🔄 Drops neu laden',
                'table-number': 'Nr.',
                'table-creator': 'Ersteller',
                'table-reward': 'Reward',
                'table-status': 'Status',
                'table-type': 'Typ',
                'table-icon': 'Icon',
                'table-coordinates': 'Koordinaten',
                'status-available': '✔ Verfügbar',
                'status-collected-today': '⏰ Heute gesammelt',
                'type-dev': 'Dev',
                'creator-kryptoguru': 'KryptoGuru',
                
                // GeoBoard translations
                'geoboard.title': '📊 GeoBoard',
                'geoboard.leaderboard': '🏆 Rangliste',
                'geoboard.statistics': '📈 Statistiken',
                'geoboard.total-pixeldrops': 'Gesamt PixelDrops',
                'geoboard.total-tbnb': 'Gesamt tBNB',
                'geoboard.total-drops': 'Gesamt Drops',
                'geoboard.boost': 'Boost',
                'geoboard.total-packages': 'Gesamt Pakete',
                'geoboard.loading-leaderboard': 'Lade Rangliste...',
                
                // Colloseum translations
                'colloseum.title': '🏛️ Colloseum',
                'colloseum.nomination': '🏛️ Nominierung',
                'colloseum.nominations-today': 'Nominierungen heute',
                'colloseum.reward-per-nomination': 'Belohnung pro Nominierung',
                'colloseum.5-pixeldrops': '5 PixelDrops',
                'colloseum.nominate-image': 'Bild nominieren',
                'colloseum.rating': '🏆 Bewertung',
                'colloseum.ratings-today': 'Bewertungen heute',
                'colloseum.next-settlement': 'Nächste Abrechnung',
                'colloseum.sunday-24': 'Sonntag 24:00',
                'colloseum.rate-images': 'Bilder bewerten',
                
                // Referrals translations
                'referrals.title': '👥 Referrals',
                'referrals.statistics': '📊 Statistiken',
                'referrals.direct-referrals': 'Direkte Referrals',
                'referrals.referral-earnings': 'Referral-Einnahmen',
                'referrals.active-referrals': 'Aktive Referrals',
                'referrals.your-referral-code': 'Dein Referral-Code',
                'referrals.your-referral-link': 'Dein Referral-Link',
                'referrals.share-link': 'Link teilen',
                'referrals.copy': 'Kopieren',
                'referrals.rewards': '💰 Belohnungen',
                'referrals.direct-referrals-5': 'Direkte Referrals (5%)',
                'referrals.indirect-referrals-1': 'Indirekte Referrals (1%)',
                'referrals.automatic-system': 'Automatisches System',
                'referrals.how-it-works': '📋 Wie funktioniert das Referral-System?',
                'referrals.your-referrals': 'Deine Referrals',
                'referrals.indirect-referrals': 'Indirekte Referrals',
                'referrals.total-referral-earnings': 'Gesamt Referral-Einnahmen',
                'referrals.loading-referrals': 'Lade Referrals...',
                'referrals.direct-referrals-5-desc': 'Du erhältst 5% von allen Käufen deiner direkten Referrals',
                'referrals.indirect-referrals-1-desc': 'Du erhältst 1% von allen Käufen der Referrals deiner Referrals',
                'referrals.automatic-system-desc': 'Alle Belohnungen werden automatisch ausgezahlt',
                'referrals.direct-referrals-5-desc-detailed': 'Wenn jemand über deinen Link registriert und später Pakete kauft, erhältst du 5% der Kaufsumme als tBNB.',
                'referrals.indirect-referrals-1-desc-detailed': 'Wenn deine Referrals selbst Leute werben, erhältst du 1% von deren Käufen.',
                'referrals.automatic-system-desc-detailed': 'Alle Belohnungen werden automatisch auf dein Wallet ausgezahlt, sobald jemand kauft.',
                
                // Additional referral translations
                'referral-bonus': 'Empfehlungsbonus',
                'referral-desc': '+5% von Käufen',
                'referral-system': 'Empfehlungssystem',
                'referral-bonus-text': 'Du erhältst 50 PixelDrop Startbonus!',
                'referral-code-label': '🔗 EMPFEHLUNGSCODE (OPTIONAL)',
                'referral-code-placeholder': 'EMPFEHLUNGSCODE EINGEBEN',
                'referral-bonus-desc': 'Du erhältst 50 PixelDrop Bonus wenn du über einen Empfehlungslink kommst!',
                'referral-system-feature': 'Empfehlungssystem',
                'referral-system-desc': 'Lade Freunde ein und verdiene 5% ihres Einkommens. 2. Stufe: 1% zusätzlich.'
            },
            en: {
                // Banner
                'banner-earn': '💰 Earn Money with Gaming!',
                
                // Navigation
                'startseite': 'Home',
                'geocard': 'GeoCard',
                'geoboard': 'GeoBoard',
                'mining': 'Mining',
                'bonus': 'Bonus',
                'geochat': 'GeoChat',
                'trading': 'Trading',
                'mehr': 'More',
                'dev': 'Dev',
                'machines': 'Mining',
                
                // Landing Page
                'welcome-title': 'Welcome to the future of Geo-Mining',
                'whitepaper-title': '📖 Show complete Whitepaper',
                'main-whitepaper': '📄 Main Whitepaper',
                'alt-whitepaper': '📋 Alternative Version',
                'whitepaper-instruction': '💡 Click on the buttons to open the complete Whitepaper documents in new tabs',
                'mobile-users': '📱 Mobile Users: The Whitepapers open in new browser tabs. You can switch between tabs or leave the app in the background.',
                
                // Content
                'what-is-geodrop': '🎯 What is GeoDrop?',
                'what-is-geodrop-desc': 'GeoDrop is an innovative blockchain-based app that connects geocaching with cryptocurrencies. Users can place virtual "drops" at real locations and earn rewards by completing tasks.',
                
                'technology-title': '🔧 Technology (Status: September 2025)',
                'blockchain': 'Blockchain: tBNB-based Smart Contracts with PixelDrop Token',
                'trading-system': 'Trading System: Complete DeFi trading between PixelDrop ↔ tBNB',
                'mining-machines': 'Mining Machines: 4 different machine types with Boost System',
                'gps': 'GPS: Precise location determination with 20m accuracy',
                'firebase': 'Firebase: Real-time database for Drops and User Interactions',
                'dev-area': 'Dev Area: Extended Admin Tools and Drop Management',
                'bonus-system': 'Bonus System: Daily rewards with special effects',
                'pwa-support': 'PWA Support: Installable Web-App for mobile devices',
                'realtime-updates': 'Real-time Updates: Live Updates for all App Functions',
                
                'gameplay-title': '🎮 Gameplay',
                'gameplay-desc': 'Users navigate to GeoDrops, take photos of the location and receive rewards in the form of cryptocurrencies. The system prevents fraud through GPS validation and image analysis.',
                
                'security-title': '🔒 Security',
                'security-decentralized': 'Decentralized Blockchain Architecture',
                'security-smart-contracts': 'Smart Contract-based Rewards',
                'security-anti-cheat': 'Anti-Cheat Systems',
                'security-encryption': 'Encrypted data transmission',
                
                // Buttons
                'login': 'Login',
                'register': 'Register',
                
                // Additional missing translations
                'geodrop-title': '🌍 GeoDrop',
                'geodrop-subtitle': 'Welcome to the Future of Geo-Mining',
                'user-info': '👤 User Info',
                'email': 'E-Mail:',
                'username': 'Username:',
                'level': 'Level:',
                'coins': 'Coins:',
                'drops': 'Drops:',
                'boost': 'Boost:',
                'username-placeholder': 'Choose your Username',
                'email-placeholder': 'your@email.com',
                
                // Hero Section
                'future-title': 'The Future of',
                'future-subtitle': 'Geo-Mining',
                'hero-description': 'Earn cryptocurrencies through geocaching! Discover virtual drops at real locations and collect rewards with innovative blockchain technology.',
                'register-free': 'Register for free',
                'learn-more': 'Learn more',
                
                // Statistics
                'active-users': 'Active Users',
                'geodrops': 'GeoDrops',
                'paid-out': 'Paid Out',
                
                // Cards
                'geodrop-found': 'GeoDrop found!',
                'daily-bonus': 'Daily Bonus',
                'referral-bonus': 'Referral Bonus',
                'referral-desc': '+5% from purchases',
                
                // Additional missing translations
                'ready-future': 'Ready for the future of Geo-Mining?',
                'join-thousands': 'Join thousands of users and earn cryptocurrencies through geocaching!',
                'how-it-works': 'How it works',
                '4-simple-steps': 'In 4 simple steps to your first cryptocurrencies',
                'find-drops': 'Find Drops',
                'find-drops-desc': 'Use the map to discover GeoDrops near you.',
                'take-photos': 'Take Photos',
                'take-photos-desc': 'Take a photo of the location and confirm your presence.',
                'referral-system': 'Referral System',
                'earn-with-friends': 'Earn with every friend you invite',
                '2-level-system': '🎯 2-Level System',
                'referral-bonus-text': 'You get 50 PixelDrop start bonus!',
                'referral-code-label': '🔗 REFERRAL-CODE (OPTIONAL)',
                'referral-code-placeholder': 'ENTER REFERRAL-CODE',
                'referral-bonus-desc': 'You get 50 PixelDrop bonus if you come via a referral link!',
                'already-registered': 'Already registered? Log in here',
                'already-registered-text': 'Already registered?',
                'login-here': 'Log in here',
                'new-crypto-chance': '🚀 New Crypto Chance - Start now!',
                'whitepaper-desc': 'Learn more about the GeoDrop concept and the technology behind it.',
                'read-whitepaper': 'Read Whitepaper',
                'show-roadmap': 'Show Roadmap',
                'tokenomics': 'Tokenomics',
                'register-now': '🚀 Register now',
                'create-account': 'Create your account and start immediately!',
                'login-title': '🔑 Login',
                'welcome-back': 'Welcome back!',
                'login-button': 'Login',
                'dev': 'Dev',
                'best-game': '🎮 Best Idle-RPG Game! - Play now!',
                'password-placeholder': 'At least 6 characters',
                'email-label': 'E-Mail',
                'password-label': 'Password',
                'username-label': 'Username',
                'step1-title': 'Register',
                'step1-desc': 'Create your free account and connect your MetaMask Wallet.',
                'step4-title': 'Receive Reward',
                'step4-desc': 'Receive PixelDrop Tokens directly in your wallet.',
                
                // Feature Cards
                'what-can-geodrop': 'What can GeoDrop do?',
                'discover-features': 'Discover the revolutionary features of the Geo-Mining App',
                'gps-mining': 'GPS-based Mining',
                'gps-mining-desc': 'Find virtual drops at real locations and earn cryptocurrencies through geocaching activities.',
                'mining-machines-feature': 'Mining Machines',
                'mining-machines-desc': '4 different machine types for passive income. From Basic to Mega Miner with different boosts.',
                'defi-trading': 'DeFi Trading',
                'defi-trading-desc': 'Trade PixelDrop ↔ tBNB directly in the app. Complete DeFi trading with smart contracts.',
                'daily-bonuses': 'Daily Bonuses',
                'daily-bonuses-desc': 'Collect 50 PixelDrop daily as login bonus. Special effects and animations included.',
                'referral-system-feature': 'Referral System',
                'referral-system-desc': 'Invite friends and earn 5% of their income. 2nd level: 1% additional.',
                'pwa-support': 'PWA Support',
                'pwa-support-desc': 'Installable web app for mobile devices. Works offline and like a native app.',
                
                // GeoCard translations
                'geocard-title': '🗺️ GeoCard',
                'interactive-map': '🌍 Interactive Map',
                'map-legend-button': '🗺️ Show Map Legend',
                'drop-rules-button': '📋 Drop Rules',
                'user-drop-button': '➕ Create User Drop',
                'location-title': '📍 Location',
                'use-my-location': '📍 Use My Location',
                'location-info-default': 'Click the button to load your current position',
                'photo-upload-title': '📸 Photo Upload',
                'select-geodrop': 'Select GeoDrop:',
                'user-drops': '👤 User Drops',
                'dev-drops': '🎯 Dev Drops',
                'select-dev-geodrop': 'Choose Dev GeoDrop...',
                'select-user-geodrop': 'Choose User GeoDrop...',
                'dev-drop-1': '🎯 Dev GeoDrop1 - 100 PixelDrops',
                'dev-drop-2': '🎯 Dev GeoDrop2 - 100 PixelDrops',
                'dev-drop-3': '🎯 Dev GeoDrop3 - 100 PixelDrops',
                'dev-drop-4': '🎯 Dev GeoDrop4 - 100 PixelDrops',
                'dev-drop-5': '🎯 Dev GeoDrop5 - 100 PixelDrops',
                'dev-drop-6': '🎯 Dev GeoDrop6 - 100 PixelDrops',
                'dev-drop-7': '🎯 Dev GeoDrop7 - 100 PixelDrops',
                'dev-drop-8': '🎯 Dev GeoDrop8 - 100 PixelDrops',
                'map-legend-title': '🗺️ Map Legend',
                'your-location': 'Your Location',
                'your-location-desc': 'Your current GPS position',
                'take-photo': '📸 Take Photo',
                'upload-debug': '🔍 Upload Debug',
                
                // Additional GeoCard translations
                'latitude': 'Latitude',
                'longitude': 'Longitude',
                'latitude-lat': 'Latitude (Lat)',
                'longitude-lng': 'Longitude (Lng)',
                'dev-latitude': 'Dev Latitude',
                'dev-longitude': 'Dev Longitude',
                'reload-drops': '🔄 Reload Drops',
                'save-changes': '✅ Save Changes',
                'latitude-placeholder': 'e.g. 52.520008',
                'longitude-placeholder': 'e.g. 13.404954',
                'no-dev-drops': 'No Dev GeoDrops found',
                'error-loading-dev-drops': 'Error loading Dev GeoDrops',
                'legend-collected-today': 'Collected Today',
                'legend-collected-today-desc': 'Gray dart board - Already collected today',
                'legend-normal-drops': 'Normal GeoDrops',
                'legend-normal-drops-desc': 'Small dart board - Official GeoDrops',
                'legend-user-drops': 'User GeoDrops',
                'legend-user-drops-desc': 'Medium size - Player-created GeoDrops',
                'legend-dev-drops': 'Dev GeoDrop',
                'legend-dev-drops-desc': 'Larger dart board (2.5x bigger) - Developer test drops',
                'dev-drops-legend': '🎯 Dev GeoDrops',
                'user-drops-legend': '🌍 User GeoDrops',
                
                // User Drop Modal translations
                'drop-name': '🎯 Drop Name:',
                'drop-name-placeholder': 'e.g. Historical Building',
                'what-to-photograph': '📸 What should be photographed:',
                'photograph-description-placeholder': 'Describe exactly what should be photographed at this location...',
                'reference-image-upload': '📷 Upload Reference Image:',
                'choose-file': 'Choose File',
                'no-file-selected': 'None selected',
                'reference-image-description': 'Upload a reference image that shows what should be photographed',
                'reward-pixeldrops': '💰 Reward (PixelDrops):',
                'user-drops-fixed': 'User Drops are fixed at 10 PixelDrops',
                'location': '📍 Location:',
                'use-current-position': 'Use Current Position',
                'location-auto-description': 'Location is automatically taken from your current position',
                'create-user-drop': '✔ Create User Drop',
                'cancel': '✗ Cancel',
                'create-user-drop-title': '➕ Create User GeoDrop',
                'latitude': 'Latitude',
                'longitude': 'Longitude',
                'dev-test-coordinates': '🔧 DEV: Test Coordinates:',
                'dev-latitude': 'Dev Latitude',
                'dev-longitude': 'Dev Longitude',
                'dev-test-warning': '⚠️ Only for Dev tests - normal users don\'t see this!',
                
                // Additional missing translations
                'your-location': 'Your Location',
                'accuracy': 'Accuracy:',
                'time': 'Time:',
                'location-found': 'Location found:',
                'current-position': 'Current Position',
                'user-mode': 'USER MODE (Dev disabled)',
                'adjust-coordinates': 'Adjust Coordinates',
                'reset': 'Reset',
                
                // GeoDrops Table
                'geodrops-overview': '📋 GeoDrops Overview',
                'dev-geodrops': '🎯 Dev GeoDrops',
                'user-geodrops': '👤 User GeoDrops',
                'table-number': 'No.',
                'table-creator': 'Creator',
                'table-reward': 'Reward',
                'table-status': 'Status',
                'table-type': 'Type',
                'table-icon': 'Icon',
                'table-coordinates': 'Coordinates',
                'table-created': 'Created',
                'table-actions': 'Actions',
                'status-active': '✅ Active',
                'status-inactive': '❌ Inactive',
                'please-login': 'Please log in first',
                'no-user-drops': 'No User GeoDrops found',
                'error-loading-user-drops': 'Error loading User GeoDrops',
                'error-loading-geodrops': 'Error loading GeoDrops',
                'loading-dev-drops-table': 'Loading Dev GeoDrops table...',
                'user-drops-displayed': '👤 User GeoDrops displayed',
                'dev-drops-displayed': '🎯 Dev GeoDrops displayed',
                'modal-not-found': '❌ Modal not found',
                'cleanup-duplicates': '🧹 Cleanup Duplicates',
                'reload-all-lists': '🔄 Reload All Lists',
                'dev-test-warning': '⚠️ Only for Dev tests - normal users don\'t see this!',
                'end-dev-session': '🔒 End Dev Session',
                'status-claimed': '❌ Claimed',
                'status-available': '✅ Available',
                'status-claimed-today': '⏰ Claimed Today',
                'selected-for-upload': 'selected for upload',
                
                // Dev Coordinates Section
                'dev-coordinates-title': '🎯 Dev Coordinate Adjustment',
                'admin-status': 'Admin Status:',
                'admin-active': 'Active',
                'admin-inactive': 'Inactive (admin password required)',
                'dev-coords-status': 'Dev Coordinates:',
                'dev-coords-not-set': 'Not set',
                'dev-coords-set': 'Set',
                'admin-required': '🔒 Admin Mode Required',
                'admin-mode-disable': '🔓 Disable Admin Mode',
                'admin-mode-enable': '🔓 Enable Admin Mode',
                'dev-drop-create': '🎯 Create Dev Drop',
                'dev-test-coordinates': '🔧 DEV: Enter Test Coordinates:',
                'set-test-coordinates': '📍 Set Test Coordinates',
                'create-test-melk': '🏛️ Test Drop: Create Melk Abbey',
                'create-test-schonbrunn': '🏰 Test Drop: Create Schönbrunn Palace',
                'create-all-states': '🇦🇹 Create All 9 State Drops',
                'create-remaining-states': '🚀 Create Remaining 8 State Drops',
                'clear-user-drops': '🧹 Clear User Drop Lists',
                'restore-user-drops': '🔄 Restore User Drop Lists',
                'check-user-drop-count': '📊 Check User Drop Count',
                'create-missing-drop1': '🏛️ Create Drop No. 1 (Melk Abbey)',
                
                // Additional missing translations
                'zoom': 'Zoom:',
                'dev-latitude-label': 'Dev Latitude',
                'dev-longitude-label': 'Dev Longitude',
                
                // Map and Table translations
                'dev-coordinate-adjustment': 'Dev Coordinate Adjustment',
                'admin-mode-required': 'Admin Mode Required',
                'current-position': 'Current Position',
                'admin-status': 'Admin Status:',
                'dev-coordinates': 'Dev Coordinates:',
                'geodrops-overview': 'GeoDrops Overview',
                'dev-geodrops-tab': '🎯 Dev GeoDrops',
                'user-geodrops-tab': '👤 User GeoDrops',
                'reload-drops-tab': '🔄 Reload Drops',
                'table-number': 'No.',
                'table-creator': 'Creator',
                'table-reward': 'Reward',
                'table-status': 'Status',
                'table-type': 'Type',
                'table-icon': 'Icon',
                'table-coordinates': 'Coordinates',
                'status-available': '✔ Available',
                'status-collected-today': '⏰ Collected Today',
                'type-dev': 'Dev',
                'creator-kryptoguru': 'KryptoGuru',
                
                // GeoBoard translations
                'geoboard.title': '📊 GeoBoard',
                'geoboard.leaderboard': '🏆 Leaderboard',
                'geoboard.statistics': '📈 Statistics',
                'geoboard.total-pixeldrops': 'Total PixelDrops',
                'geoboard.total-tbnb': 'Total tBNB',
                'geoboard.total-drops': 'Total Drops',
                'geoboard.boost': 'Boost',
                'geoboard.total-packages': 'Total Packages',
                'geoboard.loading-leaderboard': 'Loading leaderboard...',
                
                // Colloseum translations
                'colloseum.title': '🏛️ Colloseum',
                'colloseum.nomination': '🏛️ Nomination',
                'colloseum.nominations-today': 'Nominations today',
                'colloseum.reward-per-nomination': 'Reward per nomination',
                'colloseum.5-pixeldrops': '5 PixelDrops',
                'colloseum.nominate-image': 'Nominate image',
                'colloseum.rating': '🏆 Rating',
                'colloseum.ratings-today': 'Ratings today',
                'colloseum.next-settlement': 'Next settlement',
                'colloseum.sunday-24': 'Sunday 24:00',
                'colloseum.rate-images': 'Rate images',
                
                // Referrals translations
                'referrals.title': '👥 Referrals',
                'referrals.statistics': '📊 Statistics',
                'referrals.direct-referrals': 'Direct Referrals',
                'referrals.referral-earnings': 'Referral Earnings',
                'referrals.active-referrals': 'Active Referrals',
                'referrals.your-referral-code': 'Your Referral Code',
                'referrals.your-referral-link': 'Your Referral Link',
                'referrals.share-link': 'Share Link',
                'referrals.copy': 'Copy',
                'referrals.rewards': '💰 Rewards',
                'referrals.direct-referrals-5': 'Direct Referrals (5%)',
                'referrals.indirect-referrals-1': 'Indirect Referrals (1%)',
                'referrals.automatic-system': 'Automatic System',
                'referrals.how-it-works': '📋 How does the Referral System work?',
                'referrals.your-referrals': 'Your Referrals',
                'referrals.indirect-referrals': 'Indirect Referrals',
                'referrals.total-referral-earnings': 'Total Referral Earnings',
                'referrals.loading-referrals': 'Loading referrals...',
                'referrals.direct-referrals-5-desc': 'You get 5% from all purchases of your direct referrals',
                'referrals.indirect-referrals-1-desc': 'You get 1% from all purchases of referrals of your referrals',
                'referrals.automatic-system-desc': 'All rewards are paid out automatically',
                'referrals.direct-referrals-5-desc-detailed': 'If someone registers through your link and later buys packages, you get 5% of the purchase amount as tBNB.',
                'referrals.indirect-referrals-1-desc-detailed': 'If your referrals themselves recruit people, you get 1% from their purchases.',
                'referrals.automatic-system-desc-detailed': 'All rewards are automatically paid out to your wallet as soon as someone buys.',
                
                // Additional referral translations
                'referral-bonus': 'Referral Bonus',
                'referral-desc': '+5% from purchases',
                'referral-system': 'Referral System',
                'referral-bonus-text': 'You get 50 PixelDrop start bonus!',
                'referral-code-label': '🔗 REFERRAL-CODE (OPTIONAL)',
                'referral-code-placeholder': 'ENTER REFERRAL-CODE',
                'referral-bonus-desc': 'You get 50 PixelDrop bonus if you come via a referral link!',
                'referral-system-feature': 'Referral System',
                'referral-system-desc': 'Invite friends and earn 5% of their income. 2nd level: 1% additional.'
            }
        };
        
        // Make translations globally available
        window.translations = translations;
        
        // Language switching function
        function switchLanguage(lang) {
            console.log('🔄 Switching language to:', lang);
            currentLang = lang;
            window.currentLang = currentLang; // Update global variable
            
            // Use consistent localStorage key
            localStorage.setItem('geodrop-language', lang);
            localStorage.removeItem('selectedLanguage'); // Remove old key
            
            console.log('✅ Language set to:', currentLang);
            
            // Call global language.js switchLanguage if available
            if (window.switchLanguage && window.switchLanguage !== switchLanguage) {
                console.log('🔄 Calling global language.js switchLanguage');
                window.switchLanguage(lang);
            } else {
                console.log('🔄 Using local switchLanguage');
            updateAllTexts();
            updateLanguageButtons();
            }
            
            // Update marker popups if function exists
            if (window.updateMarkerPopups) {
                setTimeout(() => {
                    window.updateMarkerPopups();
                }, 300);
            }
            
            // Update dropdown language if function exists
            if (window.updateDropdownLanguage) {
                setTimeout(() => {
                    window.updateDropdownLanguage();
                }, 100);
            }
            
            // Force update all texts again after a longer delay to catch all dynamically loaded content
            setTimeout(() => {
                console.log('🔄 Force updating texts after 500ms...');
                updateAllTexts();
            }, 500);
            
            // Force update all texts again after an even longer delay
            setTimeout(() => {
                console.log('🔄 Force updating texts after 1000ms...');
                updateAllTexts();
            }, 1000);
        }
        
        // Make switchLanguage globally available
        window.switchLanguage = switchLanguage;
        
        // Make getCurrentLanguage globally available
        window.getCurrentLanguage = function() {
            return currentLang;
        };
        
        // Helper function to get translated text
        function getTranslatedText(key) {
            return translations[currentLang] && translations[currentLang][key] ? translations[currentLang][key] : key;
        }
        
        // Make getTranslatedText globally available
        window.getTranslatedText = getTranslatedText;
        
        // Update language button styles
        function updateLanguageButtons() {
            // Main navigation buttons only
            const mainDeBtn = document.getElementById('main-lang-de-btn');
            const mainEnBtn = document.getElementById('main-lang-en-btn');
            
            // Update Main navigation buttons
            if (mainDeBtn && mainEnBtn) {
                // Reset all buttons
                mainDeBtn.classList.remove('bg-gray-700');
                mainEnBtn.classList.remove('bg-gray-700');
                
                // Highlight current language
                if (currentLang === 'de') {
                    mainDeBtn.classList.add('bg-gray-700');
                } else {
                    mainEnBtn.classList.add('bg-gray-700');
                }
            }
        }
        
        // Update all texts based on current language
        function updateAllTexts() {
            console.log('🔄 updateAllTexts called with currentLang:', currentLang);
            const elements = document.querySelectorAll('[data-translate]');
            console.log('📝 Found', elements.length, 'elements with data-translate');
            
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                let translation = null;
                
                // Try global language.js translations first
                if (window.t && typeof window.t === 'function') {
                    translation = window.t(key);
                    console.log('🔍 window.t result for', key, ':', translation);
                }
                // Fallback to local translations
                if (!translation && translations[currentLang] && translations[currentLang][key]) {
                    translation = translations[currentLang][key];
                    console.log('🔍 local translations result for', key, ':', translation);
                }
                // Final fallback - try to get from global translations object
                if (!translation && window.translations && window.translations[currentLang] && window.translations[currentLang][key]) {
                    translation = window.translations[currentLang][key];
                    console.log('🔍 global translations result for', key, ':', translation);
                }
                
                if (translation) {
                    // Update text content for most elements
                    if (element.tagName === 'INPUT' && element.type !== 'submit') {
                        element.placeholder = translation;
                    } else {
                        element.textContent = translation;
                    }
                    console.log('✅ Updated element with key:', key, 'to:', translation);
                } else {
                    console.log('⚠️ No translation found for key:', key, 'in language:', currentLang);
                }
            });
            
            // Update placeholders
            const usernameInput = document.getElementById('reg-username');
            const emailInput = document.getElementById('reg-email');
            const passwordInput = document.getElementById('reg-password');
            const referralInput = document.getElementById('reg-referral');
            
            if (usernameInput && translations[currentLang] && translations[currentLang]['username-placeholder']) {
                usernameInput.placeholder = translations[currentLang]['username-placeholder'];
            }
            
            if (emailInput && translations[currentLang] && translations[currentLang]['email-placeholder']) {
                emailInput.placeholder = translations[currentLang]['email-placeholder'];
            }
            
            if (passwordInput && translations[currentLang] && translations[currentLang]['password-placeholder']) {
                passwordInput.placeholder = translations[currentLang]['password-placeholder'];
            }
            
            if (referralInput && translations[currentLang] && translations[currentLang]['referral-code-placeholder']) {
                referralInput.placeholder = translations[currentLang]['referral-code-placeholder'];
            }
            
            // Update whitepaper links based on language
            updateWhitepaperLinks();
            
            // Force update all texts again after a short delay to catch dynamically loaded content
            setTimeout(() => {
                document.querySelectorAll('[data-translate]').forEach(element => {
                    const key = element.getAttribute('data-translate');
                    let translation = null;
                    
                    // Try global language.js translations first
                    if (window.t && typeof window.t === 'function') {
                        translation = window.t(key);
                    }
                    // Fallback to local translations
                    if (!translation && translations[currentLang] && translations[currentLang][key]) {
                        translation = translations[currentLang][key];
                    }
                    
                    if (translation) {
                        // Update text content for most elements
                        if (element.tagName === 'INPUT' && element.type !== 'submit') {
                            element.placeholder = translation;
                        } else {
                            element.textContent = translation;
                        }
                    }
                });
            }, 100);
        }
        
        // Make updateAllTexts globally available
        window.updateAllTexts = updateAllTexts;
        
        function updateWhitepaperLinks() {
            console.log('🔗 Updating whitepaper links for language:', currentLang);
            
            // Find links by their original href or by their position in the whitepaper popup
            const mainWhitepaperLink = document.querySelector('#whitepaper-popup a:first-of-type');
            const altWhitepaperLink = document.querySelector('#whitepaper-popup a:last-of-type');
            
            if (mainWhitepaperLink) {
                if (currentLang === 'en') {
                    mainWhitepaperLink.href = 'english/whitepaper_english.html';
                    console.log('✅ Main whitepaper link set to English version');
                } else {
                    mainWhitepaperLink.href = 'whitepaper.html';
                    console.log('✅ Main whitepaper link set to German version');
                }
            }
            
            if (altWhitepaperLink) {
                if (currentLang === 'en') {
                    altWhitepaperLink.href = 'english/whitepaper_tech_english.html';
                    altWhitepaperLink.style.display = 'inline-flex';
                    console.log('✅ Alt whitepaper link set to English tech version');
                } else {
                    altWhitepaperLink.href = 'whitepaper_alt.html';
                    altWhitepaperLink.style.display = 'inline-flex';
                    console.log('✅ Alt whitepaper link set to German version');
                }
            }
        }
        
        // Debug System - Disabled for Production
        let debugWindowVisible = false;
        
        // Dev Tab Functions - Load Early
        window.showDevTab = function(tabName) {
            console.log('🔧 Switching to dev tab:', tabName);
            
            // Hide all dev tabs
            document.querySelectorAll('.dev-tab').forEach(tab => {
                tab.classList.remove('active');
                tab.style.display = 'none';
            });
            
            // Remove active class from all dev tab buttons
            document.querySelectorAll('.mehr-tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            const selectedTab = document.getElementById(tabName);
            if (selectedTab) {
                selectedTab.classList.add('active');
                selectedTab.style.display = 'block';
                console.log('✅ Dev tab shown:', tabName);
            }
            
            // Add active class to clicked button
            const clickedBtn = document.querySelector(`[data-tab="${tabName}"]`);
            if (clickedBtn) {
                clickedBtn.classList.add('active');
            }
            
            // Update filename display when switching to upload tab
            if (tabName === 'dev-upload') {
                console.log('🔄 Upload tab opened, updating filename display...');
                setTimeout(() => {
                    if (typeof updateNextFilenameDisplay === 'function') {
                        console.log('✅ updateNextFilenameDisplay function found, calling it...');
                        updateNextFilenameDisplay();
                    } else {
                        console.log('❌ updateNextFilenameDisplay function not found!');
                        // Fallback: Direct count and update
                        if (typeof getDevDropsCount === 'function') {
                            getDevDropsCount().then(count => {
                                const nextNumber = count + 1;
                                const nextFilename = `GeoDrop${nextNumber}`;
                                console.log(`📝 Fallback: Found ${count} drops, next filename: ${nextFilename}`);
                                
                                const displayElement = document.getElementById('next-filename-display');
                                if (displayElement) {
                                    displayElement.textContent = nextFilename;
                                    console.log(`✅ Fallback: Updated display to ${nextFilename}`);
                                }
                                
                                const filenameInput = document.getElementById('dev-filename');
                                if (filenameInput) {
                                    filenameInput.value = nextFilename;
                                    console.log(`✅ Fallback: Updated input to ${nextFilename}`);
                                }
                            });
                        }
                    }
                }, 100);
            }
        };
        
        
        
        
        console.log('🔧 Early debug functions loaded');
        
        // Force update filename display after page load
        setTimeout(() => {
            console.log('🔄 Force updating filename display after page load...');
            if (typeof updateNextFilenameDisplay === 'function') {
                updateNextFilenameDisplay();
            } else {
                console.log('❌ updateNextFilenameDisplay function not found');
            }
        }, 2000);
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-analytics.js"></script>
    
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1490.0.min.js"></script>
    
    
    
    
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    
    <link rel="stylesheet" href="css/styles.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            background-color: #1f2937;
            background-color: #1a202c;
            color: #e2e8f0;
        }
        
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        /* Removed body overlay filter */
        
        .page {
            display: none;
            width: 100%;
            min-height: calc(100vh - 128px);
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
            padding: 1rem;
            box-sizing: border-box;
            position: relative;
            z-index: 1;
        }
        .page.active {
            display: flex;
        }
        main {
            padding-top: 64px;
            padding-bottom: 64px;
        }

        .nav-btn {
            transition: all 0.3s ease;
        }
        .nav-btn:hover {
            transform: translateY(-2px);
        }
        .nav-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        /* Mobile responsive design */
        @media (max-width: 768px) {
            main {
                margin-left: 0 !important;
                margin-top: 4rem !important;
                padding-top: 1rem !important;
                padding-bottom: 1rem !important;
            }
            
            .page {
                min-height: calc(100vh - 80px);
                padding: 0.5rem;
            }
            
            .nav-btn {
                font-size: 0.75rem;
                padding: 0.5rem;
                min-height: 44px; /* Touch-friendly */
            }

            /* Modern Mobile Navigation */
            .mobile-nav {
                position: fixed;
                bottom: 60px; /* Über der Ad-Banner (60px Höhe) */
                left: 0;
                right: 0;
                background: linear-gradient(180deg, rgba(26, 32, 44, 0.95) 0%, rgba(26, 32, 44, 1) 100%);
                backdrop-filter: blur(20px);
                border-top: 1px solid rgba(59, 130, 246, 0.3);
                z-index: 100000;
                display: flex;
                overflow-x: auto;
                scrollbar-width: none;
                -ms-overflow-style: none;
                padding: 0.75rem 0.5rem 1rem 0.5rem;
                box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
            }
            
            .mobile-nav::-webkit-scrollbar {
                display: none;
            }
            
            .mobile-nav .nav-btn {
                flex: 0 0 auto;
                min-width: 60px;
                margin: 0 0.25rem;
                text-align: center;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                min-height: 70px;
                position: relative;
                border-radius: 12px;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                color: #9ca3af;
                text-decoration: none;
            }
            
            .mobile-nav .nav-btn:hover {
                background: rgba(59, 130, 246, 0.1);
                transform: translateY(-2px);
            }
            
            .mobile-nav .nav-btn.active {
                background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(147, 51, 234, 0.2) 100%);
                color: #3b82f6;
                transform: translateY(-3px);
                box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
            }
            
            .mobile-nav .nav-icon {
                font-size: 1.5rem;
                margin-bottom: 0.25rem;
                transition: all 0.3s ease;
            }
            
            .mobile-nav .nav-btn.active .nav-icon {
                transform: scale(1.1);
                filter: drop-shadow(0 0 8px rgba(59, 130, 246, 0.5));
            }
            
            .mobile-nav .nav-label {
                font-size: 0.6rem;
                font-weight: 600;
                margin-top: 0.125rem;
                transition: all 0.3s ease;
            }
            
            .mobile-nav .nav-indicator {
                position: absolute;
                top: 0.5rem;
                left: 50%;
                transform: translateX(-50%);
                width: 4px;
                height: 4px;
                background: #3b82f6;
                border-radius: 50%;
                opacity: 0;
                transition: all 0.3s ease;
            }
            
            .mobile-nav .nav-btn.active .nav-indicator {
                opacity: 1;
                transform: translateX(-50%) scale(1.5);
                box-shadow: 0 0 8px rgba(59, 130, 246, 0.6);
            }
            
            /* Hide desktop navigation on mobile */
            .desktop-nav {
                display: none;
            }
            
            /* Mobile-optimized content */
            .mobile-content {
                padding-bottom: 220px; /* Space for mobile nav + ad banner (60px + 160px) */
            }
            
            /* Touch-friendly buttons */
            button, .btn {
                min-height: 48px;
                min-width: 48px;
                font-size: 1rem;
                padding: 0.75rem 1rem;
                border-radius: 12px;
                transition: all 0.3s ease;
            }
            
            button:hover, .btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            }
            
            /* Mobile-optimized forms */
            input, textarea, select {
                min-height: 48px;
                font-size: 1rem;
                padding: 0.75rem;
                border-radius: 12px;
                border: 2px solid #374151;
                background: #2d3748;
                color: white;
                transition: all 0.3s ease;
            }
            
            input:focus, textarea:focus, select:focus {
                border-color: #3b82f6;
                box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
                outline: none;
            }
            
            /* Mobile-optimized cards */
            .card, .bg-gray-700, .bg-gray-800 {
                border-radius: 16px;
                padding: 1.5rem;
                margin-bottom: 1rem;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
                border: 1px solid rgba(59, 130, 246, 0.1);
            }
            
            /* Mobile-optimized text */
            h1, h2, h3, h4, h5, h6 {
                line-height: 1.3;
                margin-bottom: 1rem;
            }
            
            p {
                line-height: 1.6;
                margin-bottom: 1rem;
            }
            
            /* Mobile-optimized spacing */
            .space-y-4 > * + * {
                margin-top: 1.5rem;
            }
            
            .space-y-6 > * + * {
                margin-top: 2rem;
            }
            
            /* Mobile-optimized grid */
            .grid {
                gap: 1rem;
            }
            
            .grid-cols-2 {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .grid-cols-3 {
                grid-template-columns: repeat(2, 1fr);
            }
            
            /* Mobile-optimized popups */
            .fixed {
                padding: 1rem;
            }
            
            .max-w-4xl {
                max-width: 95vw;
            }
            
            /* Mobile-optimized animations */
            .animate-pulse {
                animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            }
            
            .animate-bounce {
                animation: bounce 1s infinite;
            }
            
            /* Mobile-optimized scrollbars */
            ::-webkit-scrollbar {
                width: 4px;
            }
            
            ::-webkit-scrollbar-track {
                background: #1a202c;
            }
            
            ::-webkit-scrollbar-thumb {
                background: #3b82f6;
                border-radius: 2px;
            }
            
            ::-webkit-scrollbar-thumb:hover {
                background: #2563eb;
            }
            
            /* Mobile-optimized input fields */
            input[type="text"], input[type="email"], input[type="password"], input[type="number"] {
                font-size: 16px; /* Prevents zoom on iOS */
                padding: 12px;
                border-radius: 8px;
                border: 2px solid #4b5563;
                background-color: #374151;
                color: white;
                width: 100%;
                box-sizing: border-box;
            }
            
            input:focus, textarea:focus, select:focus {
                border-color: #3b82f6;
                outline: none;
                box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            }
            
            /* Mobile-optimized buttons */
            button {
                border-radius: 8px;
                font-weight: 600;
                transition: all 0.2s ease;
                touch-action: manipulation;
            }
            
            button:active {
                transform: scale(0.98);
            }
            
            /* Mobile-optimized labels */
            label {
                font-weight: 500;
                margin-bottom: 8px;
                display: block;
            }
            
            /* Mobile-optimized cards */
            .bg-gray-700, .bg-gray-800 {
                margin: 0.5rem;
                border-radius: 8px;
            }
            
            /* Mobile grid adjustments */
            .grid-cols-1 {
                gap: 1rem;
            }
            
            .lg\\:grid-cols-2 {
                grid-template-columns: 1fr;
            }
            
            /* Mobile map controls */
            .mobile-zoom-control, .mobile-location-control {
                background: transparent !important;
                border: none !important;
                box-shadow: none !important;
            }
            
            .mobile-zoom-control button, .mobile-location-control button {
                min-width: 44px;
                min-height: 44px;
                border-radius: 50%;
                box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                border: none;
                cursor: pointer;
            }
            
            /* Mobile map container */
            #mapid {
                height: 60vh !important;
                min-height: 300px;
            }
            
            /* Mobile camera modal - NO ZOOM */
            #camera-modal {
                z-index: 9999;
                overflow-y: auto !important;
                padding: 10px !important;
            }
            
            #camera-modal > div {
                max-height: 90vh !important;
                overflow-y: auto !important;
                margin-top: 10px !important;
                margin-bottom: 10px !important;
            }
            
            #camera-modal video {
                width: 100%;
                height: 50vh;
                object-fit: cover;
            }
            
            #camera-modal button {
                min-height: 48px;
                font-size: 16px;
            }
        }
        
        /* Desktop navigation */
        @media (min-width: 769px) {
            .mobile-nav {
                display: none;
            }
            
            .desktop-nav {
                display: block;
            }
            
            /* Desktop: Ad Banner sichtbar machen */
            #ad-banner {
                display: flex !important;
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                z-index: 50 !important;
            }
            
            /* Desktop: Bottom Ad Banner sichtbar machen */
            #bottom-ad-banner {
                display: flex !important;
                position: fixed !important;
                bottom: 0 !important;
                left: 0 !important;
                right: 0 !important;
                z-index: 50 !important;
            }
            
            /* Desktop: Content anpassen */
            .mobile-content {
                padding-bottom: 60px; /* Nur Platz für Ad Banner (60px Höhe) */
            }
        }

        /* Background Logo for Start Page */
        #startseite {
            position: relative;
        }

        /* Removed dark overlay filter from startseite */

        /* User Info with visible background - compact width */
        #user-info {
            background: rgba(31, 41, 55, 0.8) !important;
            backdrop-filter: blur(8px);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            max-width: 400px;
            width: fit-content;
        }

        /* Mobile-specific fixes */
        @media (max-width: 768px) {
            /* Fix background attachment for mobile */
            #startseite {
                background-attachment: scroll !important;
            }
            
            /* Improve navigation for mobile */
            .nav-btn {
                font-size: 0.875rem;
                padding: 0.5rem 0.75rem;
            }
            
            /* Better mobile layout */
            .page {
                padding: 0.5rem;
            }
            
            /* Hide ad banner on mobile for all pages except startseite */
            #ad-banner {
                display: none !important;
            }
            
            /* Mobile: Show ad banner on startseite only */
            #startseite #ad-banner {
                display: flex !important;
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                z-index: 50 !important;
            }
            
            /* Mobile: Show bottom ad banner on startseite only */
            #startseite #bottom-ad-banner {
                display: flex !important;
                position: fixed !important;
                bottom: 0 !important;
                left: 0 !important;
                right: 0 !important;
                z-index: 50 !important;
            }
            
            /* Ad banner visibility will be controlled by JavaScript */
        }
        
        /* Extra small mobile devices */
        @media (max-width: 480px) {
            .mobile-nav {
                padding: 0.5rem 0.25rem 0.75rem 0.25rem;
            }
            
            .mobile-nav .nav-btn {
                min-height: 65px;
                min-width: 55px;
                margin: 0 0.125rem;
            }
            
            .mobile-nav .nav-icon {
                font-size: 1.25rem;
            }
            
            .mobile-nav .nav-label {
                font-size: 0.55rem;
            }
            
            .page {
                padding: 0.25rem;
            }
            
            .card, .bg-gray-700, .bg-gray-800 {
                padding: 1rem;
                border-radius: 12px;
            }
            
            button, .btn {
                min-height: 44px;
                font-size: 0.9rem;
                padding: 0.625rem 0.875rem;
            }
            
            h1 { font-size: 1.75rem; }
            h2 { font-size: 1.5rem; }
            h3 { font-size: 1.25rem; }
            h4 { font-size: 1.125rem; }
        }
        
        /* Landscape mobile orientation - Move tabs to left side */
        @media (max-width: 768px) and (orientation: landscape) {
            .mobile-nav {
                position: fixed;
                left: 0;
                top: 0;
                bottom: 0;
                width: 80px;
                height: 100vh;
                flex-direction: column;
                padding: 1rem 0.5rem;
                background: linear-gradient(90deg, rgba(26, 32, 44, 0.95) 0%, rgba(26, 32, 44, 1) 100%);
                border-right: 1px solid rgba(59, 130, 246, 0.3);
                border-top: none;
                box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3);
                overflow-y: auto;
                overflow-x: hidden;
            }
            
            .mobile-nav .nav-btn {
                min-height: 60px;
                min-width: 60px;
                margin: 0.25rem 0;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                padding: 0.5rem;
            }
            
            .mobile-nav .nav-icon {
                font-size: 1.5rem;
                margin-bottom: 0.25rem;
            }
            
            .mobile-nav .nav-label {
                font-size: 0.6rem;
                text-align: center;
                line-height: 1.1;
            }
            
            main {
                margin-left: 80px !important;
                margin-top: 0 !important;
                padding-left: 1rem;
            }
            
            .page {
                min-height: calc(100vh - 2rem);
                padding: 1rem;
            }
        }
        
        /* Dark mode optimizations */
        @media (prefers-color-scheme: dark) {
            .mobile-nav {
                background: linear-gradient(180deg, rgba(0, 0, 0, 0.95) 0%, rgba(0, 0, 0, 1) 100%);
                border-top: 1px solid rgba(59, 130, 246, 0.4);
            }
        }
        
        /* High contrast mode */
        @media (prefers-contrast: high) {
            .mobile-nav .nav-btn {
                border: 2px solid #3b82f6;
            }
            
            .mobile-nav .nav-btn.active {
                background: #3b82f6;
                color: white;
            }
        }
        
        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            .mobile-nav .nav-btn,
            .mobile-nav .nav-icon,
            .mobile-nav .nav-indicator,
            button, .btn {
                transition: none;
            }
            
            .mobile-nav .nav-btn:hover,
            .mobile-nav .nav-btn.active {
                transform: none;
            }
        }
    </style>
</head>
<body>
    <nav class="desktop-nav fixed top-0 left-0 w-64 h-full bg-gray-800 shadow-lg z-50">
        <div class="h-full flex flex-col">
            <div class="flex items-center p-4 border-b border-gray-700">
                <div class="h-8 w-8 mr-2 bg-blue-500 rounded flex items-center justify-center text-white font-bold">G</div>
                <span class="text-white font-bold text-xl">GeoDrop</span>
            </div>
            
            <!-- LEFT AD BANNER -->
            <div class="bg-purple-600 border border-purple-400 text-white p-3 m-4 rounded text-center">
              <a href="https://otieu.com/4/9919405" target="_blank" class="text-white hover:text-purple-200 font-bold text-sm">
                <span data-translate="banner-earn">💰 Verdiene Geld mit Gaming!</span>
              </a>
            </div>
            
            <div class="flex-1 p-4 space-y-2">
                  <a href="#" class="nav-btn active w-full text-left px-4 py-3 rounded-lg text-white hover:bg-gray-700 transition-colors flex items-center" onclick="showPage('startseite')">
                      <span class="mr-3">🏠</span> <span data-translate="startseite">Home</span>
                  </a>
                  <a href="#" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-white hover:bg-gray-700 transition-colors flex items-center" onclick="showPage('geocard')">
                      <span class="mr-3">🗺️</span> <span data-translate="geocard">GeoCard</span>
                  </a>
                  <a href="#" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-white hover:bg-gray-700 transition-colors flex items-center" onclick="showPage('geoboard')">
                      <span class="mr-3">📊</span> <span data-translate="geoboard">GeoBoard</span>
                  </a>
                  <a href="#" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-white hover:bg-gray-700 transition-colors flex items-center" onclick="showPage('machines')">
                      <span class="mr-3">⛏️</span> <span data-translate="machines">Mining</span>
                  </a>
                  <a href="#" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-white hover:bg-gray-700 transition-colors flex items-center" onclick="showPage('bonus')">
                      <span class="mr-3">🎁</span> <span data-translate="bonus">Bonus</span>
                  </a>
                  <a href="#" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-white hover:bg-gray-700 transition-colors flex items-center" onclick="showPage('geochat')">
                      <span class="mr-3">💬</span> <span data-translate="geochat">GeoChat</span>
                  </a>
                  <a href="#" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-white hover:bg-gray-700 transition-colors flex items-center" onclick="showPage('trading')">
                      <span class="mr-3">📈</span> <span data-translate="trading">Trading</span>
                  </a>
                  <a href="#" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-white hover:bg-gray-700 transition-colors flex items-center" onclick="showPage('mehr')">
                      <span class="mr-3">⚙️</span> <span data-translate="mehr">More</span>
                  </a>
                <a href="#" class="nav-btn w-full text-left px-4 py-3 rounded-lg text-white hover:bg-gray-700 transition-colors flex items-center" onclick="showDevLoginPopup();">
                    <span class="mr-3">🔧</span> <span data-translate="dev">Dev</span>
                </a>
                
            </div>
        </div>
    </nav>


    <main class="ml-64 mobile-content" style="padding-top: 60px; padding-bottom: 60px;">
        <!-- TOP AD BANNER - FIXED -->
        <div id="ad-banner" class="bg-blue-600 border border-blue-400 text-white p-3 shadow-lg text-center fixed top-0 left-0 right-0 z-50">
          <a href="https://otieu.com/4/9919405" target="_blank" class="text-white hover:text-blue-200 font-bold">
            <span data-translate="best-game">🎮 Best Idle-RPG Game! - Jetzt spielen!</span>
          </a>
        </div>
        
        <!-- Page Container -->
        <div id="page-container">
            <!-- Language Switcher for Main Pages -->
            <div class="fixed top-16 right-4 z-50">
                <div class="bg-gray-800 bg-opacity-90 backdrop-blur-md border border-gray-600 rounded-lg p-1 flex shadow-lg">
                    <button onclick="switchLanguage('de')" id="main-lang-de-btn" class="px-3 py-1 rounded text-white font-semibold hover:bg-gray-700 transition-all text-sm bg-gray-700">
                        🇩🇪
                    </button>
                    <button onclick="switchLanguage('en')" id="main-lang-en-btn" class="px-3 py-1 rounded text-white font-semibold hover:bg-gray-700 transition-all text-sm">
                        🇺🇸
                    </button>
                </div>
            </div>
            
            <div class="page" id="startseite" style="display: block;">
                <div id="geodrop-section" class="bg-gray-800 bg-opacity-70 rounded-lg p-4 mb-6 backdrop-blur-sm text-center" style="max-width: 500px; width: fit-content; margin: 0 auto 1.5rem auto;">
                    <h1 class="text-4xl font-bold text-white mb-2" data-translate="geodrop-title">🌍 GeoDrop</h1>
                    <p class="text-gray-300 text-lg" data-translate="geodrop-subtitle">Welcome to the Future of Geo-Mining</p>
                </div>
                
                
                <div id="user-info" class="bg-gray-800 bg-opacity-70 rounded-lg p-4 mb-6 backdrop-blur-sm" style="display: none; max-width: 400px; width: fit-content; margin: 0 auto 1.5rem auto;">
                    <h3 class="text-xl font-semibold text-white mb-4" data-translate="user-info">👤 User Info</h3>
                    <div class="space-y-2">
                        <p><strong data-translate="email">E-Mail:</strong> <span id="user-email">-</span></p>
                        <p><strong data-translate="username">Username:</strong> <span id="user-username">-</span></p>
                        <p><strong data-translate="level">Level:</strong> <span id="user-level">-</span></p>
                        <p><strong data-translate="coins">Coins:</strong> <span id="user-coins">-</span></p>
                        <p><strong data-translate="drops">Drops:</strong> <span id="user-drops">-</span></p>
                        <p><strong data-translate="boost">Boost:</strong> <span id="user-boost">-</span></p>
                    </div>
                    
                    <div id="referral-info" class="mt-4 p-3 bg-green-600 bg-opacity-20 rounded border border-green-500 hidden">
                        <p class="text-green-300 text-sm">
                            🎉 <strong>Referral Bonus!</strong><br>
                            You were invited by <span id="referral-user">-</span>!<br>
                            <span data-translate="referral-bonus-text">You get 50 PixelDrop start bonus!</span>
                        </p>
                    </div>
                    
                    <button onclick="logout()" class="mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">Logout</button>
                </div>
                
                <div id="whitepaper-section" class="bg-gray-800 bg-opacity-70 rounded-lg p-4 mb-6 mt-24 backdrop-blur-sm" style="max-width: 500px; width: fit-content; margin: 6rem auto 1.5rem auto;">
                    <h3 class="text-xl font-semibold text-white mb-4">📄 Whitepaper</h3>
                    <p class="text-gray-300 mb-4" data-translate="whitepaper-desc">Learn more about the GeoDrop concept and the technology behind it.</p>
                    <div class="flex flex-wrap gap-3 justify-center">
                        <button onclick="showWhitepaper()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                            📄 <span data-translate="read-whitepaper">Read Whitepaper</span>
                        </button>
                        <button onclick="showRoadmap()" class="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors">
                            🗺️ <span data-translate="show-roadmap">Show Roadmap</span>
                        </button>
                        <button onclick="showTokenomics()" class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                            💰 <span data-translate="tokenomics">Tokenomics</span>
                        </button>
                    </div>
                </div>
                
                <div id="landing-content" style="display: none;">
                    <div class="min-h-screen flex items-center relative overflow-hidden" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);">
                        <div class="absolute inset-0 bg-black/20"></div>
                        
                        <div class="absolute top-4 right-4 sm:top-6 sm:right-6 z-20 flex gap-2">
                            
                            <!-- Login Button -->
                            <button onclick="showLoginForm()" class="bg-white/20 backdrop-blur-md border border-white/30 px-4 py-2 sm:px-6 sm:py-3 rounded-lg text-white font-semibold hover:bg-white/30 transition-all shadow-lg text-sm sm:text-base">
                                <i class="fas fa-sign-in-alt mr-1 sm:mr-2"></i>
                                <span class="hidden sm:inline" data-translate="login">Login</span>
                                <span class="sm:hidden" data-translate="login">Login</span>
                            </button>
                        </div>
                        
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                            <div class="grid lg:grid-cols-2 gap-12 items-center">
                                <div class="space-y-8">
                        <div class="space-y-4">
                                        <h1 class="text-5xl lg:text-7xl font-bold leading-tight">
                                            <span data-translate="future-title">The Future of</span>
                                            <span class="bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent" data-translate="future-subtitle">
                                                Geo-Mining
                                            </span>
                                        </h1>
                                        <p class="text-xl text-gray-300 leading-relaxed" data-translate="hero-description">
                                            Earn cryptocurrencies through geocaching! Discover virtual drops at real locations and collect rewards with innovative blockchain technology.
                                        </p>
                            </div>
                    
                                    <div class="flex flex-col sm:flex-row gap-4">
                                        <button onclick="showRegistrationForm()" class="bg-gradient-to-r from-blue-600 to-purple-600 px-8 py-4 rounded-lg text-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all pulse-glow text-center">
                                            <i class="fas fa-user-plus mr-2"></i>
                                            <span data-translate="register-free">Register for free</span>
                                        </button>
                                        <button onclick="scrollToFeatures()" class="border-2 border-white/20 px-8 py-4 rounded-lg text-lg font-semibold hover:bg-white/10 transition-all text-center">
                                            <i class="fas fa-play mr-2"></i>
                                            <span data-translate="learn-more">Learn more</span>
                                        </button>
                                    </div>
                                    
                                    <div class="grid grid-cols-3 gap-8 pt-8">
                                        <div class="text-center">
                                            <div class="text-3xl font-bold text-blue-400">1000+</div>
                                            <div class="text-gray-400" data-translate="active-users">Aktive User</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-3xl font-bold text-purple-400">50+</div>
                                            <div class="text-gray-400" data-translate="geodrops">GeoDrops</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-3xl font-bold text-green-400">$10K+</div>
                                            <div class="text-gray-400" data-translate="paid-out">Ausgezahlt</div>
                                        </div>
                        </div>
                    </div>
                    
                                <div class="relative">
                                    <div class="floating">
                                        <div class="bg-white/10 backdrop-blur-md rounded-2xl p-8 border border-white/20">
                                            <div class="space-y-6">
                                                <div class="flex items-center space-x-3">
                                                    <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
                                                        <i class="fas fa-map-marker-alt text-white"></i>
                                                    </div>
                                                    <div>
                                                        <div class="font-semibold" data-translate="geodrop-found">GeoDrop gefunden!</div>
                                                        <div class="text-sm text-gray-300">+150 PixelDrop</div>
                                                    </div>
                                                </div>
                                                
                                                <div class="flex items-center space-x-3">
                                                    <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-blue-600 rounded-lg flex items-center justify-center">
                                                        <i class="fas fa-coins text-white"></i>
                                                    </div>
                                                    <div>
                                                        <div class="font-semibold" data-translate="daily-bonus">Daily Bonus</div>
                                                        <div class="text-sm text-gray-300">+50 PixelDrop</div>
                                                    </div>
                                                </div>
                                                
                                                <div class="flex items-center space-x-3">
                                                    <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg flex items-center justify-center">
                                                        <i class="fas fa-users text-white"></i>
                                                    </div>
                                                    <div>
                                                        <div class="font-semibold" data-translate="referral-bonus">Referral Bonus</div>
                                                        <div class="text-sm text-gray-300" data-translate="referral-desc">+5% from purchases</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <section id="features" class="py-20 bg-gray-800">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div class="text-center mb-16">
                                <h2 class="text-4xl font-bold mb-4" data-translate="what-can-geodrop">What can GeoDrop do?</h2>
                                <p class="text-xl text-gray-400" data-translate="discover-features">Discover the revolutionary features of the Geo-Mining App</p>
                            </div>
                            
                            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                                <div class="bg-gray-700/50 backdrop-blur-sm rounded-xl p-8 card-hover border border-gray-600">
                                    <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg flex items-center justify-center mb-6">
                                        <i class="fas fa-map-marked-alt text-2xl text-white"></i>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-4" data-translate="gps-mining">GPS-based Mining</h3>
                                    <p class="text-gray-300" data-translate="gps-mining-desc">Find virtual drops at real locations and earn cryptocurrencies through geocaching activities.</p>
                                </div>
                                
                                <div class="bg-gray-700/50 backdrop-blur-sm rounded-xl p-8 card-hover border border-gray-600">
                                    <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center mb-6">
                                        <i class="fas fa-coins text-2xl text-white"></i>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-4" data-translate="mining-machines-feature">Mining Machines</h3>
                                    <p class="text-gray-300" data-translate="mining-machines-desc">4 different machine types for passive income. From Basic to Mega Miner with different boosts.</p>
                                </div>
                                
                                <div class="bg-gray-700/50 backdrop-blur-sm rounded-xl p-8 card-hover border border-gray-600">
                                    <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center mb-6">
                                        <i class="fas fa-exchange-alt text-2xl text-white"></i>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-4" data-translate="defi-trading">DeFi Trading</h3>
                                    <p class="text-gray-300" data-translate="defi-trading-desc">Trade PixelDrop ↔ tBNB directly in the app. Complete DeFi trading with smart contracts.</p>
                                </div>
                                
                                <div class="bg-gray-700/50 backdrop-blur-sm rounded-xl p-8 card-hover border border-gray-600">
                                    <div class="w-16 h-16 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center mb-6">
                                        <i class="fas fa-gift text-2xl text-white"></i>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-4" data-translate="daily-bonuses">Daily Bonuses</h3>
                                    <p class="text-gray-300" data-translate="daily-bonuses-desc">Collect 50 PixelDrop daily as login bonus. Special effects and animations included.</p>
                                </div>
                                
                                <div class="bg-gray-700/50 backdrop-blur-sm rounded-xl p-8 card-hover border border-gray-600">
                                    <div class="w-16 h-16 bg-gradient-to-r from-red-500 to-pink-500 rounded-lg flex items-center justify-center mb-6">
                                        <i class="fas fa-users text-2xl text-white"></i>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-4" data-translate="referral-system-feature">Referral System</h3>
                                    <p class="text-gray-300" data-translate="referral-system-desc">Invite friends and earn 5% of their income. 2nd level: 1% additional.</p>
                                </div>
                                
                                <div class="bg-gray-700/50 backdrop-blur-sm rounded-xl p-8 card-hover border border-gray-600">
                                    <div class="w-16 h-16 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-lg flex items-center justify-center mb-6">
                                        <i class="fas fa-mobile-alt text-2xl text-white"></i>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-4" data-translate="pwa-support">PWA Support</h3>
                                    <p class="text-gray-300" data-translate="pwa-support-desc">Installable web app for mobile devices. Works offline and like a native app.</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section id="how-it-works" class="py-20 bg-gray-900">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div class="text-center mb-16">
                                <h2 class="text-4xl font-bold mb-4" data-translate="how-it-works">How it works</h2>
                                <p class="text-xl text-gray-400" data-translate="4-simple-steps">In 4 simple steps to your first cryptocurrencies</p>
                            </div>
                            
                            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                                <div class="text-center">
                                    <div class="w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6">
                                        <span class="text-2xl font-bold">1</span>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-4" data-translate="step1-title">Registrieren</h3>
                                    <p class="text-gray-400" data-translate="step1-desc">Erstelle kostenlos deinen Account und verbinde dein MetaMask Wallet.</p>
                                </div>
                                
                                <div class="text-center">
                                    <div class="w-20 h-20 bg-gradient-to-r from-green-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6">
                                        <span class="text-2xl font-bold">2</span>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-4" data-translate="find-drops">Find Drops</h3>
                                    <p class="text-gray-400" data-translate="find-drops-desc">Use the map to discover GeoDrops near you.</p>
                                </div>
                                
                                <div class="text-center">
                                    <div class="w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-6">
                                        <span class="text-2xl font-bold">3</span>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-4" data-translate="take-photos">Take Photos</h3>
                                    <p class="text-gray-400" data-translate="take-photos-desc">Take a photo of the location and confirm your presence.</p>
                                </div>
                                
                                <div class="text-center">
                                    <div class="w-20 h-20 bg-gradient-to-r from-yellow-500 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-6">
                                        <span class="text-2xl font-bold">4</span>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-4" data-translate="step4-title">Belohnung erhalten</h3>
                                    <p class="text-gray-400" data-translate="step4-desc">Erhalte PixelDrop Tokens direkt in dein Wallet.</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section id="referral" class="py-20 bg-gradient-to-r from-blue-900 to-purple-900">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div class="text-center mb-16">
                                <h2 class="text-4xl font-bold mb-4" data-translate="referral-system">Referral System</h2>
                                <p class="text-xl text-gray-300" data-translate="earn-with-friends">Earn with every friend you invite</p>
                            </div>
                            
                            <div class="grid lg:grid-cols-2 gap-12 items-center">
                                <div class="space-y-8">
                                    <div class="bg-white/10 backdrop-blur-md rounded-xl p-8 border border-white/20">
                                        <h3 class="text-2xl font-bold mb-6" data-translate="2-level-system">🎯 2-Ebenen System</h3>
                        <div class="space-y-4">
                                            <div class="flex items-center space-x-4">
                                                <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center">
                                                    <span class="text-white font-bold">1</span>
                            </div>
                                                <div>
                                                    <div class="font-semibold">Direkte Referrals</div>
                                                    <div class="text-green-400 font-bold">5% ihrer Einnahmen</div>
                        </div>
                    </div>
                    
                                            <div class="flex items-center space-x-4">
                                                <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg flex items-center justify-center">
                                                    <span class="text-white font-bold">2</span>
                                                </div>
                                                <div>
                                                    <div class="font-semibold">Referrals deiner Referrals</div>
                                                    <div class="text-blue-400 font-bold">1% ihrer Einnahmen</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-white/10 backdrop-blur-md rounded-xl p-8 border border-white/20">
                                        <h3 class="text-2xl font-bold mb-6">💰 Beispiel-Rechnung</h3>
                                        <div class="space-y-3 text-sm">
                                            <div class="flex justify-between">
                                                <span>Dein Referral verdient:</span>
                                                <span class="font-semibold">1000 PixelDrop</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span>Dein Anteil (5%):</span>
                                                <span class="text-green-400 font-bold">50 PixelDrop</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span>Referral deines Referrals:</span>
                                                <span class="font-semibold">500 PixelDrop</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span>Dein Anteil (1%):</span>
                                                <span class="text-blue-400 font-bold">5 PixelDrop</span>
                                            </div>
                                            <hr class="border-white/20">
                                            <div class="flex justify-between text-lg">
                                                <span class="font-bold">Gesamt-Einnahmen:</span>
                                                <span class="text-yellow-400 font-bold">55 PixelDrop</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="space-y-6">
                                    <div class="bg-white/10 backdrop-blur-md rounded-xl p-8 border border-white/20">
                                        <h3 class="text-2xl font-bold mb-6">🚀 Jetzt starten</h3>
                                        <div class="space-y-4">
                                            <button onclick="showRegistrationForm()" class="block w-full bg-gradient-to-r from-green-600 to-emerald-600 px-6 py-4 rounded-lg text-center font-semibold hover:from-green-700 hover:to-emerald-700 transition-all">
                                                <i class="fas fa-rocket mr-2"></i>
                                                App starten
                                            </button>
                                            <p class="text-sm text-gray-300 text-center">
                                                Registriere dich kostenlos und erhalte sofort 100 PixelDrop Startbonus!
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-white/10 backdrop-blur-md rounded-xl p-8 border border-white/20">
                                        <h3 class="text-2xl font-bold mb-6">📱 Mobile App</h3>
                                        <p class="text-gray-300 mb-4">
                                            GeoDrop funktioniert perfekt auf dem Handy. Installiere die PWA für die beste Erfahrung.
                                        </p>
                                        <div class="flex space-x-4">
                                            <button class="flex-1 bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg transition-colors">
                                                <i class="fas fa-download mr-2"></i>
                                                Installieren
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="py-20 bg-gray-800">
                        <div class="max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8">
                            <h2 class="text-4xl font-bold mb-6" data-translate="ready-future">Ready for the future of Geo-Mining?</h2>
                            <p class="text-xl text-gray-400 mb-8" data-translate="join-thousands">
                                Join thousands of users and earn cryptocurrencies through geocaching!
                            </p>
                            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                                <button onclick="showRegistrationForm()" class="bg-gradient-to-r from-blue-600 to-purple-600 px-8 py-4 rounded-lg text-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all">
                                    <i class="fas fa-user-plus mr-2"></i>
                                    <span data-translate="register-free">Register for free</span>
                                </button>
                                <button onclick="scrollToFeatures()" class="border-2 border-white/20 px-8 py-4 rounded-lg text-lg font-semibold hover:bg-white/10 transition-all">
                                    <i class="fas fa-info-circle mr-2"></i>
                                    <span data-translate="learn-more">Learn more</span>
                                </button>
                            </div>
                        </div>
                    </section>


                    <div id="registration-section" class="py-20 bg-gray-800" style="display: block;">
                        <div class="max-w-md mx-auto px-4 sm:px-6 lg:px-8">
                            <div class="text-center mb-8">
                                <h2 id="form-title" class="text-4xl font-bold mb-4" data-translate="register-now">🚀 Jetzt registrieren</h2>
                                <p id="form-subtitle" class="text-xl text-gray-400" data-translate="create-account">Erstelle deinen Account und starte sofort!</p>
                            </div>
                            
                            <div class="bg-white/10 backdrop-blur-md rounded-xl p-8 border border-white/20">
                                <div id="registration-form" class="space-y-4">
                                    <div id="username-field">
                                        <label class="block text-sm font-medium text-gray-300 mb-2" data-translate="username-label">Benutzername</label>
                                        <input type="text" id="reg-username" placeholder="" class="w-full px-4 py-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none" onkeypress="if(event.key === 'Enter') handleEnterKey()">
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2" data-translate="email-label">E-Mail</label>
                                        <input type="email" id="reg-email" placeholder="" class="w-full px-4 py-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none" onkeypress="if(event.key === 'Enter') handleEnterKey()">
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2" data-translate="password-label">Passwort</label>
                                        <input type="password" id="reg-password" placeholder="" class="w-full px-4 py-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none" onkeypress="if(event.key === 'Enter') handleEnterKey()">
                                    </div>
                                    
                                    <div id="referral-field" style="background: red !important; padding: 15px !important; margin: 15px 0 !important; border: 3px solid yellow !important; display: block !important; visibility: visible !important;">
                                        <label class="block text-sm font-medium text-white mb-2" style="color: white !important; font-weight: bold !important;" data-translate="referral-code-label">🔗 REFERRAL-CODE (OPTIONAL)</label>
                                        <input type="text" id="reg-referral" placeholder="" class="w-full px-4 py-3 bg-white text-black rounded-lg border border-red-500 focus:border-blue-500 focus:outline-none" style="background: white !important; color: black !important; border: 3px solid red !important;">
                                        <p class="text-xs text-white mt-1" style="color: white !important;" data-translate="referral-bonus-desc">You get 50 PixelDrop bonus if you come via a referral link!</p>
                                    </div>
                                    
                                    
                                    <button id="main-button" onclick="registerFromLanding()" class="w-full bg-gradient-to-r from-green-600 to-emerald-600 px-6 py-4 rounded-lg text-center font-semibold hover:from-green-700 hover:to-emerald-700 transition-all">
                                        <i class="fas fa-user-plus mr-2"></i>
                                        <span data-translate="register-free">Kostenlos registrieren</span>
                                    </button>
                                    
                                    <p class="text-sm text-gray-300 text-center">
                                        <span data-translate="already-registered-text">Bereits registriert?</span> <button onclick="toggleForm()" class="text-blue-400 hover:text-blue-300" data-translate="login-here">Hier anmelden</button>
                                    </p>
                                </div>
                                
                                <div id="registration-success" class="hidden text-center">
                                    <div class="text-6xl mb-4">🎉</div>
                                    <h4 class="text-2xl font-bold text-green-400 mb-2">Registration successful!</h4>
                                    <p class="text-gray-300 mb-4">You get 100 PixelDrop start bonus!</p>
                                    <button onclick="goToApp()" class="inline-block bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all">
                                        <i class="fas fa-rocket mr-2"></i>
                                        Go to App
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>


                    </div>
                </div>
            </div>
            
            <div class="page" id="geocard" style="display: none;">
                <!-- GeoCard Content -->
                <div class="max-w-6xl mx-auto p-6">
                    <h2 class="text-3xl font-bold text-white mb-8">
                        <span style="background: rgba(0, 0, 0, 0.7); padding: 8px 12px; border-radius: 8px; display: inline-block;" data-translate="geocard.title">🗺️ GeoCard</span>
                    </h2>
                    
                    <!-- Control Buttons -->
                    <div class="flex flex-wrap gap-3 justify-center mb-8">
                        <button onclick="showMapLegend()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                            🗺️ <span data-translate="map-legend-button">Karten-Legende anzeigen</span>
                        </button>
                        <button onclick="showDropRules()" class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                            📋 <span data-translate="drop-rules-button">Drop-Regeln</span>
                        </button>
                        <button onclick="showUserDropModal()" class="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors">
                            ➕ <span data-translate="user-drop-button">User Drop erstellen</span>
                        </button>
                    </div>
                    
                    <!-- Map Container -->
                    <div id="map" class="w-full h-96 bg-gray-700 rounded-lg mb-6"></div>
                    
                    <!-- Location Info -->
                    <div class="bg-gray-800 rounded-lg p-4 mb-6">
                        <h3 class="text-lg font-semibold text-white mb-2" data-translate="location-title">📍 Standort</h3>
                        <div id="location-info" class="text-gray-300" data-translate="location-info-default">
                            Klicke auf den Button um deine aktuelle Position zu laden
                        </div>
                        <button onclick="getCurrentLocation()" class="mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors">
                            📍 <span data-translate="use-my-location">Meinen Standort verwenden</span>
                        </button>
                    </div>
                    
                    <!-- Photo Upload Section -->
                    <div class="bg-gray-800 rounded-lg p-4">
                        <h3 class="text-lg font-semibold text-white mb-4" data-translate="photo-upload-title">📸 Foto-Upload</h3>
                        
                        <!-- Drop Selection -->
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-300 mb-2" data-translate="select-geodrop">GeoDrop auswählen:</label>
                            <div class="flex space-x-2 mb-2">
                                <button id="dev-drops-btn" onclick="switchUploadListType('dev')" class="flex-1 px-3 py-1 rounded-md text-xs font-medium transition-colors bg-green-600 text-white" data-translate="dev-drops">🎯 Dev Drops</button>
                                <button id="user-drops-btn" onclick="switchUploadListType('user')" class="flex-1 px-3 py-1 rounded-md text-xs font-medium transition-colors text-gray-300 hover:text-white" data-translate="user-drops">👤 User Drops</button>
                            </div>
                            <select id="geocard-drop-select" class="w-full p-2 bg-gray-700 text-white rounded border border-gray-600">
                                <option value="" data-translate="select-dev-geodrop">Dev GeoDrop auswählen...</option>
                            </select>
                        </div>
                        
                        <!-- Photo Input -->
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-300 mb-2">📸 Foto auswählen:</label>
                            <input type="file" id="photo-input" accept="image/*" class="w-full p-2 bg-gray-700 text-white rounded border border-gray-600">
                            <div id="photo-preview" class="mt-2"></div>
                        </div>
                        
                        <!-- Upload Button -->
                        <button onclick="autoStartUpload()" class="w-full px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors">
                            📤 <span data-translate="upload-photo">Foto hochladen</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="page" id="dev" style="display: none;">
                </div>
            
            <div class="page" id="geoboard" style="display: none;">
                <!-- GeoBoard Content -->
                <div class="max-w-6xl mx-auto p-6">
                    <h2 class="text-3xl font-bold text-white mb-8">
                        <span style="background: rgba(0, 0, 0, 0.7); padding: 8px 12px; border-radius: 8px; display: inline-block;" data-translate="geoboard.title">📊 GeoBoard</span>
                    </h2>
                    
                    <!-- Tab Navigation -->
                    <div class="mb-8">
                        <div class="flex space-x-2">
                            <button id="geoboard-tab" class="mehr-tab-btn active" data-tab="geoboard-content" onclick="switchToGeoBoard()" data-translate="geoboard.title">
                                📊 GeoBoard
                            </button>
                            <button id="colloseum-tab" class="mehr-tab-btn" data-tab="colloseum-content" onclick="switchToColloseum()" data-translate="colloseum.title">
                                🏛️ Colloseum
                            </button>
                            <button id="referrals-tab" class="mehr-tab-btn" data-tab="referrals-content" onclick="switchToReferrals()" data-translate="referrals.title">
                                👥 Referrals
                            </button>
                        </div>
                    </div>
                    
                    <!-- GeoBoard Content -->
                    <div id="geoboard-content" class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Leaderboard -->
                        <div class="bg-gray-700 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-white mb-4" data-translate="geoboard.leaderboard">🏆 Rangliste</h3>
                            <div id="leaderboard" class="space-y-3">
                                <div class="text-center text-gray-400 p-4" data-translate="geoboard.loading-leaderboard">Lade Rangliste...</div>
                            </div>
                        </div>
                        
                        <!-- Statistics -->
                        <div class="bg-gray-700 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-white mb-4" data-translate="geoboard.statistics">📈 Statistiken</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center p-3 bg-gray-600 rounded-lg">
                                    <span class="text-gray-300" data-translate="geoboard.total-pixeldrops">Gesamt-PixelDrop:</span>
                                    <span class="text-purple-400 font-bold" id="stats-coins">0</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-600 rounded-lg">
                                    <span class="text-gray-300" data-translate="geoboard.total-tbnb">Gesamt-tBNB:</span>
                                    <span class="text-yellow-400 font-bold" id="stats-tbnb">0.00</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-600 rounded-lg">
                                    <span class="text-gray-300" data-translate="geoboard.total-drops">Gesamt-Drops:</span>
                                    <span class="text-blue-400 font-bold" id="stats-drops">0</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-600 rounded-lg">
                                    <span class="text-gray-300" data-translate="geoboard.boost">Boost:</span>
                                    <span class="text-green-400 font-bold" id="stats-boost">1.0x</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-600 rounded-lg">
                                    <span class="text-gray-300" data-translate="geoboard.total-packages">Gesamt-Pakete:</span>
                                    <span class="text-orange-400 font-bold" id="global-packages">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Colloseum Content -->
                    <div id="colloseum-content" class="grid grid-cols-1 lg:grid-cols-2 gap-8" style="display: none;">
                        <!-- Nomination Section -->
                        <div class="bg-gray-700 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-white mb-4" data-translate="colloseum.nomination">🎯 Nominierung</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center p-3 bg-gray-600 rounded-lg">
                                    <span class="text-gray-300" data-translate="colloseum.nominations-today">Nominierungen heute:</span>
                                    <span class="text-blue-400 font-bold" id="nominations-today">0</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-600 rounded-lg">
                                    <span class="text-gray-300" data-translate="colloseum.reward-per-nomination">Belohnung pro Nominierung:</span>
                                    <span class="text-green-400 font-bold" data-translate="colloseum.5-pixeldrops">5 PixelDrops</span>
                                </div>
                                <button id="nominate-btn" class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors" onclick="showNominationModal()" data-translate="colloseum.nominate-image">
                                    🎯 Bild nominieren
                                </button>
                            </div>
                        </div>
                        
                        <!-- Rating Section -->
                        <div class="bg-gray-700 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-white mb-4" data-translate="colloseum.rating">⭐ Bewertung</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center p-3 bg-gray-600 rounded-lg">
                                    <span class="text-gray-300" data-translate="colloseum.ratings-today">Bewertungen heute:</span>
                                    <span class="text-purple-400 font-bold" id="ratings-today">0</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-600 rounded-lg">
                                    <span class="text-gray-300" data-translate="colloseum.next-settlement">Nächste Abrechnung:</span>
                                    <span class="text-yellow-400 font-bold" id="next-abrechnung" data-translate="colloseum.sunday-24">Sonntag 24:00</span>
                                </div>
                                <button id="rate-btn" class="w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors" data-translate="colloseum.rate-images">
                                    ⭐ Bilder bewerten
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Referrals Content -->
                    <div id="referrals-content" class="grid grid-cols-1 lg:grid-cols-2 gap-8" style="display: none;">
                        <!-- Referral Statistics -->
                        <div class="bg-gray-700 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-white mb-4" data-translate="referrals.statistics">📊 Referral Statistiken</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center p-3 bg-gray-600 rounded-lg">
                                    <span class="text-gray-300" data-translate="referrals.direct-referrals">Direkte Referrals:</span>
                                    <span class="text-blue-400 font-bold" id="direct-referrals">0</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-600 rounded-lg">
                                    <span class="text-gray-300" data-translate="referrals.referral-earnings">Referral Einnahmen:</span>
                                    <span class="text-green-400 font-bold" id="referral-earnings">0.00 tBNB</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-600 rounded-lg">
                                    <span class="text-gray-300" data-translate="referrals.active-referrals">Aktive Referrals:</span>
                                    <span class="text-purple-400 font-bold" id="active-referrals">0</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-600 rounded-lg">
                                    <span class="text-gray-300" data-translate="referrals.your-referral-code">Dein Referral Code:</span>
                                    <span class="text-yellow-400 font-bold" id="referral-code">-</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-600 rounded-lg">
                                    <span class="text-gray-300" data-translate="referrals.indirect-referrals">Indirekte Referrals:</span>
                                    <span class="text-pink-400 font-bold" id="indirect-referrals-count">0</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-gray-600 rounded-lg">
                                    <span class="text-gray-300" data-translate="referrals.total-referral-earnings">Gesamt Referral-Einnahmen:</span>
                                    <span class="text-emerald-400 font-bold" id="total-referral-earnings">0.00 tBNB</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Referral Link -->
                        <div class="bg-gray-700 rounded-lg p-6">
                            <h3 class="text-xl font-semibold text-white mb-4" data-translate="referrals.your-referral-link">🔗 Dein Referral Link</h3>
                            <div class="space-y-4">
                                <div>
                                    <p class="text-gray-300 mb-2" data-translate="referrals.share-link">Teile diesen Link mit Freunden:</p>
                                    <div class="flex space-x-2">
                                        <input type="text" id="referral-link" class="flex-1 px-3 py-2 bg-gray-600 text-white rounded-lg border border-gray-500 focus:border-blue-500 focus:outline-none" readonly>
                                        <button onclick="copyReferralLinkFromGeoBoard()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm" data-translate="referrals.copy">
                                            📋 Kopieren
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Rewards Info -->
                                <div class="mt-6">
                                    <h4 class="text-green-400 font-semibold mb-2" data-translate="referrals.rewards">💰 Belohnungen</h4>
                                    <div class="text-sm text-gray-300 space-y-1">
                                        <p>• <span data-translate="referrals.direct-referrals-5">🎯 Direkte Referrals (5%):</span> <span data-translate="referrals.direct-referrals-5-desc">Du erhältst 5% von allen Käufen deiner direkten Referrals</span></p>
                                        <p>• <span data-translate="referrals.indirect-referrals-1">🔄 Indirekte Referrals (1%):</span> <span data-translate="referrals.indirect-referrals-1-desc">Du erhältst 1% von allen Käufen der Referrals deiner Referrals</span></p>
                                        <p>• <span data-translate="referrals.automatic-system">⚡ Automatisches System:</span> <span data-translate="referrals.automatic-system-desc">Alle Belohnungen werden automatisch ausgezahlt</span></p>
                                    </div>
                                </div>
                                
                                <!-- How it works -->
                                <div class="mt-4">
                                    <h4 class="text-blue-400 font-semibold mb-2" data-translate="referrals.how-it-works">📋 Wie funktioniert das Referral-System?</h4>
                                    <div class="text-sm text-gray-300 space-y-1">
                                        <p><strong data-translate="referrals.direct-referrals-5">🎯 Direkte Referrals (5%):</strong></p>
                                        <p class="ml-4" data-translate="referrals.direct-referrals-5-desc-detailed">Wenn jemand über deinen Link registriert und später Pakete kauft, erhältst du 5% der Kaufsumme als tBNB.</p>
                                        
                                        <p><strong data-translate="referrals.indirect-referrals-1">🔄 Indirekte Referrals (1%):</strong></p>
                                        <p class="ml-4" data-translate="referrals.indirect-referrals-1-desc-detailed">Wenn deine Referrals selbst Leute werben, erhältst du 1% von deren Käufen.</p>
                                        
                                        <p><strong data-translate="referrals.automatic-system">⚡ Automatisches System:</strong></p>
                                        <p class="ml-4" data-translate="referrals.automatic-system-desc-detailed">Alle Belohnungen werden automatisch auf dein Wallet ausgezahlt, sobald jemand kauft.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Your Referrals List -->
                    <div class="mt-8">
                        <h3 class="text-xl font-semibold text-white" data-translate="referrals.your-referrals">👥 Deine Referrals</h3>
                        <button onclick="showIndirectReferralsModal()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm" data-translate="referrals.indirect-referrals">
                            🔄 Indirekte Referrals anzeigen
                        </button>
                        
                        <div id="referrals-list" class="mt-4">
                            <div class="text-center text-gray-400 p-8" data-translate="referrals.loading-referrals">Lade Referrals...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="page" id="machines" style="display: none;">
                </div>
            
            <div class="page" id="bonus" style="display: none;">
                </div>
            
            <div class="page" id="trading" style="display: none;">
                </div>
            
            <div class="page" id="geochat" style="display: none;">
                </div>
            
            <div class="page" id="mehr" style="display: none;">
                <div class="max-w-6xl mx-auto p-6">
                    <div class="flex flex-wrap gap-2 mb-6">
                        <button class="mehr-tab-btn active px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors border border-blue-500" data-tab="dashboard" onclick="showMehrTab('dashboard')">
                            🏠 Dashboard
                        </button>
                        <button class="mehr-tab-btn px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors border border-gray-500" data-tab="profile" onclick="showMehrTab('profile')">
                            👤 Profil
                        </button>
                        <button class="mehr-tab-btn px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors border border-gray-500" data-tab="settings" onclick="showMehrTab('settings')">
                            ⚙️ Einstellungen
                        </button>
                        <button class="mehr-tab-btn px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors border border-gray-500" data-tab="stats" onclick="showMehrTab('stats')">
                            📊 Statistiken
                        </button>
                        <button class="mehr-tab-btn px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors border border-gray-500" data-tab="leitfaden" onclick="showMehrTab('leitfaden')">
                            📖 Leitfaden
                        </button>
                        <button class="mehr-tab-btn px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors border border-gray-500" data-tab="impressum" onclick="showMehrTab('impressum')">
                            ℹ️ Impressum
                        </button>
                        <button class="mehr-tab-btn px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors border border-gray-500" data-tab="dev" onclick="showDevLoginPopup()">
                            🔧 Dev
                        </button>
                    </div>
                    
                    <div id="mehr-tab-content" style="min-height: 400px; background: transparent;">
                        </div>
                </div>
            </div>
            
        </div>
        
        <!-- BOTTOM AD BANNER - FIXED -->
        <div id="bottom-ad-banner" class="bg-green-600 border border-green-400 text-white p-3 shadow-lg text-center fixed bottom-0 left-0 right-0 z-50">
          <a href="https://otieu.com/4/9919405" target="_blank" class="text-white hover:text-green-200 font-bold">
            <span data-translate="new-crypto-chance">🚀 Neue Krypto-Chance - Jetzt starten!</span>
          </a>
        </div>
    </main>

    <div id="custom-alert" class="custom-alert" style="display: none;"></div>
    
    <div id="message-display" style="position: fixed; top: 20px; right: 20px; z-index: 10000; max-width: 400px; display: none;">
        <div id="message-content" style="background: #374151; color: white; padding: 16px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);">
            <div id="message-text"></div>
        </div>
    </div>

    <!-- Modern Dev Login Popup -->
    <div id="dev-login-popup" class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-gray-800 rounded-xl shadow-2xl max-w-md w-full p-8 border border-gray-700">
                <!-- Header -->
                <div class="text-center mb-8">
                    <div class="text-4xl mb-4">🔐</div>
                    <h2 class="text-2xl font-bold text-white mb-2">Dev-Zugang</h2>
                    <p class="text-gray-400 text-sm">Nur für autorisierte Entwickler</p>
                        </div>
                
                <!-- Password Input -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-300 mb-2">Dev-Passwort</label>
                    <input 
                        type="password" 
                        id="dev-password" 
                        placeholder="Passwort eingeben..." 
                        class="w-full px-4 py-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all"
                        onkeypress="if(event.key === 'Enter') loginDev()"
                        autocomplete="off"
                    >
                                        </div>
                
                <!-- Buttons -->
                <div class="flex gap-3 mb-6">
                    <button 
                        onclick="loginDev()" 
                        class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500/20"
                    >
                        🔓 Anmelden
                    </button>
                    <button 
                        onclick="closeDevLoginPopup()" 
                        class="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-medium py-3 px-4 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500/20"
                    >
                        ❌ Abbrechen
                    </button>
                </div>
                
                <!-- Security Notice -->
                <div class="text-center">
                    <div class="bg-yellow-900/20 border border-yellow-600/30 rounded-lg p-3">
                        <p class="text-yellow-400 text-sm font-medium">⚠️ Sicherheitshinweis</p>
                        <p class="text-yellow-300/80 text-xs mt-1">Nur autorisierte Entwickler haben Zugang zu diesem Bereich</p>
                    </div>
                                        </div>
                                        </div>
                                        </div>
                                    </div>

    <script src="config/config-secure.js"></script>
    <script src="config/config-secrets.js"></script>
    <script src="config/google-places-config.js"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1490.0.min.js"></script>
    <script src="config/aws-config.js"></script>
    <script src="js/aws-rekognition.js"></script>
    <script src="js/firebase.js"></script>
    <script src="js/analytics-backup.js"></script>
    <script src="js/common.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/geochat.js"></script>
    <script src="js/trading.js"></script>
    <script src="js/mining-functions.js"></script>
    <script src="js/wallet-functions.js"></script>
    <script src="js/ui-utils.js"></script>
    <script src="js/language.js"></script>
    <script src="js/firebase-translations.js"></script>
    <script src="js/geoboard.js"></script>
    <script src="js/geocard.js"></script>
    <script src="js/console-cleanup.js"></script>
    <script src="js/dev-functions.js"></script>
    
    <!-- GeoBoard Tab Functions -->
    <script>
        function switchToGeoBoard() {
            // Hide all content sections
            document.getElementById('geoboard-content').style.display = 'grid';
            document.getElementById('colloseum-content').style.display = 'none';
            document.getElementById('referrals-content').style.display = 'none';
            
            // Update tab buttons
            document.getElementById('geoboard-tab').classList.add('active');
            document.getElementById('colloseum-tab').classList.remove('active');
            document.getElementById('referrals-tab').classList.remove('active');
        }
        
        function switchToColloseum() {
            // Hide all content sections
            document.getElementById('geoboard-content').style.display = 'none';
            document.getElementById('colloseum-content').style.display = 'grid';
            document.getElementById('referrals-content').style.display = 'none';
            
            // Update tab buttons
            document.getElementById('geoboard-tab').classList.remove('active');
            document.getElementById('colloseum-tab').classList.add('active');
            document.getElementById('referrals-tab').classList.remove('active');
        }
        
        function switchToReferrals() {
            // Hide all content sections
            document.getElementById('geoboard-content').style.display = 'none';
            document.getElementById('colloseum-content').style.display = 'none';
            document.getElementById('referrals-content').style.display = 'grid';
            
            // Update tab buttons
            document.getElementById('geoboard-tab').classList.remove('active');
            document.getElementById('colloseum-tab').classList.remove('active');
            document.getElementById('referrals-tab').classList.add('active');
        }
    </script>
    <script src="js/upload-functions.js"></script>
    <script src="js/upload-functions-fixed.js"></script>
    <script src="js/dashboard-functions.js"></script>
    <script src="js/bonus-functions.js"></script>
    <script src="js/mehr-navigation.js"></script>
    <script>
        // FALLBACK: Ensure showMehrTab is available
        if (typeof window.showMehrTab !== 'function') {
            console.error('❌ showMehrTab not loaded! Creating fallback...');
            window.showMehrTab = function(tabId) {
                console.log('🚨 FALLBACK showMehrTab called with:', tabId);
                alert('Mehr Navigation nicht geladen! Bitte Seite neu laden.');
            };
        } else {
            console.log('✅ showMehrTab loaded successfully');
        }
        
        // Message Functions
        function showMessage(message, isError = false) {
            const messageDisplay = document.getElementById('message-display');
            const messageText = document.getElementById('message-text');
            const messageContent = document.getElementById('message-content');
            
            if (messageDisplay && messageText && messageContent) {
                messageText.textContent = message;
                messageContent.style.background = isError ? '#dc2626' : '#059669';
                messageDisplay.style.display = 'block';
                
                // Auto-hide after 3 seconds
                setTimeout(() => {
                    messageDisplay.style.display = 'none';
                }, 3000);
            } else {
                // Fallback to alert
                alert(message);
            }
        }
        
        // Direct Dev Login Function (fallback)
        function showDevLoginPopup() {
            console.log('🔐 showDevLoginPopup called directly');
            
            // Check if already logged in
            if (window.isDevLoggedIn) {
                console.log('🔓 Already logged in, switching to dev page...');
                if (typeof showPage === 'function') {
                    showPage('dev');
                } else if (typeof window.showPage === 'function') {
                    window.showPage('dev');
                } else {
                    window.location.href = 'pages/dev.html';
                }
                return;
            }
            
            const popup = document.getElementById('dev-login-popup');
            if (popup) {
                popup.classList.remove('hidden');
                document.getElementById('dev-password').focus();
                console.log('🔐 Dev login popup shown');
            } else {
                console.error('❌ Dev login popup not found!');
                showMessage('❌ Dev-Popup nicht gefunden!', true);
            }
        }
        
        // SECURITY: Dev login function is handled by js/dev-functions.js
        // No local dev login function to prevent security issues
        console.log('🔒 Dev login handled by secure dev-functions.js');
        
        // SECURITY: Quick Dev Login removed for security
        // All dev login functions are handled by js/dev-functions.js
        console.log('🔒 Quick Dev Login removed for security');
        // SECURITY: All dev login code removed for security
        
        // Update Dev Navigation
        window.updateDevNavigation = function() {
            console.log('🔧 Dev Navigation wird aktualisiert');
            console.log('🔧 isDevLoggedIn:', window.isDevLoggedIn);
            
            // Update dev links to show they're active and make them clickable
            const devLinks = document.querySelectorAll('[data-page="dev"], [onclick*="showDevLoginPopup"]');
            console.log('🔧 Found dev links:', devLinks.length);
            
            devLinks.forEach((link, index) => {
                console.log(`🔧 Processing dev link ${index}:`, link);
                
                // Make sure the link is clickable and goes to dev page
                if (window.isDevLoggedIn) {
                    console.log('🔧 Setting up clickable dev link');
                    link.style.background = '#10B981';
                    link.style.color = 'white';
                    link.title = 'Dev-Zugang aktiv - Klicken zum Öffnen';
                    
                    // Remove the login popup onclick and make it go directly to dev page
                    link.onclick = function(e) {
                        e.preventDefault();
                        console.log('🔧 Dev-Tab geklickt - öffne Dev-Login');
                        showDevLoginPopup();
                        return false;
                    };
                    
                    // Also try setting the href as backup
                    link.href = '#';
                    link.style.cursor = 'pointer';
                } else {
                    console.log('🔧 Dev not logged in - resetting to normal appearance');
                    // Reset to normal appearance when not logged in
                    link.style.background = '';
                    link.style.color = '';
                    link.title = 'Dev-Zugang - Klicken zum Anmelden';
                    link.style.cursor = 'pointer';
                    
                    // Restore original onclick behavior
                    link.onclick = function(e) {
                        e.preventDefault();
                        console.log('🔧 Dev-Tab geklickt - zeige Login Popup');
                        if (typeof showDevLoginPopup === 'function') {
                            showDevLoginPopup();
                        }
                        return false;
                    };
                }
            });
            
            // Also update any dev buttons in the navigation
            const devButtons = document.querySelectorAll('button[onclick*="showDevLoginPopup"], a[onclick*="showDevLoginPopup"]');
            console.log('🔧 Found dev buttons:', devButtons.length);
            
            devButtons.forEach((button, index) => {
                console.log(`🔧 Processing dev button ${index}:`, button);
                if (window.isDevLoggedIn) {
                    button.style.background = '#10B981';
                    button.style.color = 'white';
                    button.onclick = function(e) {
                        e.preventDefault();
                        console.log('🔧 Dev-Button geklickt - öffne Dev-Login');
                        showDevLoginPopup();
                        return false;
                    };
                    button.style.cursor = 'pointer';
                } else {
                    // Reset to normal appearance when not logged in
                    button.style.background = '';
                    button.style.color = '';
                    button.style.cursor = 'pointer';
                    
                    // Restore original onclick behavior
                    button.onclick = function(e) {
                        e.preventDefault();
                        console.log('🔧 Dev-Button geklickt - zeige Login Popup');
                        if (typeof showDevLoginPopup === 'function') {
                            showDevLoginPopup();
                        }
                        return false;
                    };
                }
            });
        }
        
        function closeDevLoginPopup() {
            const popup = document.getElementById('dev-login-popup');
            if (popup) {
                popup.classList.add('hidden');
                document.getElementById('dev-password').value = '';
            }
        }

        // Copy referral link function for GeoBoard
        function copyReferralLinkFromGeoBoard() {
            const referralCode = '2b2MBGHgaDTcSOaMzepTnGK2JVz1'; // Your real User ID
            const referralLink = `https://geodrop-f3ee1.web.app/#ref/${referralCode}`;
            
            // Update the input field
            const linkInput = document.getElementById('referral-link');
            if (linkInput) {
                linkInput.value = referralLink;
            }
            
            // Update the referral code display
            const codeDisplay = document.getElementById('referral-code');
            if (codeDisplay) {
                codeDisplay.textContent = referralCode;
            }
            
            // Copy to clipboard
            navigator.clipboard.writeText(referralLink).then(() => {
                console.log('✅ Referral link copied to clipboard:', referralLink);
                if (typeof window.showMessage === 'function') {
                    window.showMessage('🔗 Referral-Link kopiert!');
                } else {
                    alert('🔗 Referral-Link kopiert!');
                }
            }).catch(err => {
                console.error('❌ Failed to copy referral link:', err);
                // Fallback: select the text
                if (linkInput) {
                    linkInput.select();
                    linkInput.setSelectionRange(0, 99999);
                }
            });
        }

        // Process referral link function
        function processReferralLink() {
            console.log('🔗 Processing referral link...');
            
            // Parse URL parameters and hash
            const urlParams = new URLSearchParams(window.location.search);
            const hashParams = new URLSearchParams(window.location.hash.substring(1));
            
            let refCode = urlParams.get('ref') || urlParams.get('referral') || 
                         hashParams.get('ref') || hashParams.get('referral');
            
            // Also check for path-based referral (e.g., /ref/username)
            if (!refCode && window.location.pathname.includes('/ref/')) {
                const pathParts = window.location.pathname.split('/ref/');
                if (pathParts.length > 1) {
                    refCode = pathParts[1].split('/')[0];
                }
            }
            
            // Only process referral code if one is actually found
            if (refCode) {
                console.log('🔗 Referral code found:', refCode);
            } else {
                console.log('🔗 No referral code found - user will register without referral');
            }
            
            // Store in localStorage
            localStorage.setItem('referralCode', refCode);
            console.log('💾 Referral code stored in localStorage:', refCode);
            
            // Auto-fill the referral field
            setTimeout(() => {
                const referralField = document.getElementById('reg-referral');
                if (referralField) {
                    referralField.value = refCode;
                    console.log('✅ Referral field auto-filled with:', refCode);
                }
            }, 1000);
        }
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('🚀 DOM loaded, initializing app...');
            
            // Initialize language system
            if (window.initLanguageSystem) {
                window.initLanguageSystem();
            } else {
                // Fallback to old system
                const savedLang = localStorage.getItem('selectedLanguage');
                if (savedLang && (savedLang === 'de' || savedLang === 'en')) {
                    currentLang = savedLang;
                }
                updateAllTexts();
                updateLanguageButtons();
            }
            
            // Force update all texts after a delay to catch dynamically loaded content
            setTimeout(() => {
                if (window.applyLanguage) {
                    window.applyLanguage();
                } else {
                    updateAllTexts();
                }
            }, 1000);
            
            // Initialize referral links with your real User ID
            setTimeout(() => {
                const referralCode = '2b2MBGHgaDTcSOaMzepTnGK2JVz1';
                const referralLink = `https://geodrop-f3ee1.web.app/#ref/${referralCode}`;
                
                // Update referral code display
                const codeDisplay = document.getElementById('referral-code');
                if (codeDisplay) {
                    codeDisplay.textContent = referralCode;
                }
                
                // Update referral link input
                const linkInput = document.getElementById('referral-link');
                if (linkInput) {
                    linkInput.value = referralLink;
                }
                
                console.log('🔗 Referral system initialized with your User ID:', referralCode);
            }, 1500);
            
            // Force update all texts after another delay
            setTimeout(() => {
                if (window.applyLanguage) {
                    window.applyLanguage();
                } else {
                    updateAllTexts();
                }
            }, 2000);
            
            // Initialize mobile navigation
            updateMobileNav();
            
            // Add touch feedback to mobile nav buttons
            const navButtons = document.querySelectorAll('.mobile-nav .nav-btn');
            navButtons.forEach(btn => {
                btn.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.95)';
                });
                
                btn.addEventListener('touchend', function() {
                    this.style.transform = '';
                });
            });
            
            // Ensure whitepaper links are set correctly on page load
            setTimeout(() => {
                updateWhitepaperLinks();
                // Force update all texts after whitepaper links are updated
                updateAllTexts();
            }, 100);
            
            // Process referral link first
            processReferralLink();
            
            // Force update all texts after referral link processing
            setTimeout(() => {
                updateAllTexts();
            }, 500);
            
            // Check for page parameter (only for DEV navigation)
            const urlParams = new URLSearchParams(window.location.search);
            const targetPage = urlParams.get('page');
            
            // Initialize landing page logic
            window.initializeLandingPage();
            
            // If page parameter exists, navigate immediately (only for DEV navigation)
            if (targetPage && targetPage === 'geocard') {
                console.log('🎯 DEV Navigation: Navigating to GeoCard from URL parameter');
                setTimeout(() => {
                    if (typeof showPage === 'function') {
                        showPage(targetPage);
                    }
                }, 1000);
            }
            
            // Wait for Firebase to be ready, then check auto-login
            setTimeout(() => {
                window.initializeLandingPage();
                // Force update all texts after landing page initialization
                updateAllTexts();
            }, 500);
            
            setTimeout(() => {
                window.initializeLandingPage();
                // Force update all texts after landing page initialization
                updateAllTexts();
            }, 1000);
            
            setTimeout(() => {
                window.initializeLandingPage();
                // Force update all texts after landing page initialization
                updateAllTexts();
            }, 2000);
            
            // Initialize Dev status
            if (typeof window.initializeDevStatus === 'function') {
                await window.initializeDevStatus();
            }
            
            // Force update all texts after dev status initialization
            setTimeout(() => {
                updateAllTexts();
            }, 100);
            
            // Show startseite by default
            showPage('startseite');
            
            // Initialize navigation for normal users
            setTimeout(() => {
                if (typeof window.updateUserNavigation === 'function') {
                    window.updateUserNavigation();
                }
                // Force update all texts after navigation initialization
                updateAllTexts();
            }, 500);
            
            // Initialize ad banner visibility
            setTimeout(() => {
                if (typeof window.updateAdBannerVisibility === 'function') {
                    window.updateAdBannerVisibility();
                }
                // Force update all texts after ad banner initialization
                updateAllTexts();
            }, 500);
        });
    </script>

    <div id="whitepaper-popup" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-white">📄 GeoDrop Whitepaper</h2>
                        <button onclick="closeWhitepaper()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
                        </div>
                    
                    <div class="mb-6 p-4 bg-gray-700 rounded-lg">
                        <h3 class="text-lg font-semibold text-blue-400 mb-3" data-translate="whitepaper-title">📖 Show complete Whitepaper</h3>
                        <div class="flex flex-wrap gap-3">
                            <a href="whitepaper.html" target="_blank" class="px-4 py-2 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 transition-all transform hover:scale-105 font-semibold text-sm min-h-[44px] flex items-center justify-center">
                                <span data-translate="main-whitepaper">📄 Main Whitepaper</span>
                            </a>
                            <a href="whitepaper_alt.html" target="_blank" class="px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all transform hover:scale-105 font-semibold text-sm min-h-[44px] flex items-center justify-center">
                                <span data-translate="alt-whitepaper">📋 Alternative Version</span>
                            </a>
                        </div>
                        <p class="text-gray-400 text-xs mt-2" data-translate="whitepaper-instruction">
                            💡 Klicke auf die Buttons um die vollständigen Whitepaper-Dokumente in neuen Tabs zu öffnen
                        </p>
                        
                        <div class="mt-3 p-2 bg-blue-600 bg-opacity-20 rounded border border-blue-500 hidden md:block">
                            <p class="text-blue-300 text-xs" data-translate="mobile-users">
                                📱 <strong>Mobile Nutzer:</strong> Die Whitepaper öffnen sich in neuen Browser-Tabs. 
                                Du kannst zwischen den Tabs wechseln oder die App im Hintergrund lassen.
                            </p>
                        </div>
                        </div>
                    <div class="prose prose-invert max-w-none">
                        <h3 class="text-xl font-semibold text-white mb-4" data-translate="what-is-geodrop">🎯 What is GeoDrop?</h3>
                        <p class="text-gray-300 mb-4" data-translate="what-is-geodrop-desc">
                            GeoDrop is an innovative blockchain-based app that connects geocaching with cryptocurrencies. 
                            Users can place virtual "drops" at real locations and earn rewards by completing tasks.
                        </p>
                        
                        <h3 class="text-xl font-semibold text-white mb-4" data-translate="technology-title">🔧 Technology (Status: September 2025)</h3>
                        <ul class="text-gray-300 mb-4 list-disc list-inside">
                            <li data-translate="blockchain"><strong>Blockchain:</strong> tBNB-basierte Smart Contracts mit PixelDrop Token</li>
                            <li data-translate="trading-system"><strong>Trading System:</strong> Complete DeFi trading between PixelDrop ↔ tBNB</li>
                            <li data-translate="mining-machines"><strong>Mining-Maschinen:</strong> 4 verschiedene Maschinentypen mit Boost-System</li>
                            <li data-translate="gps"><strong>GPS:</strong> Precise location determination with 20m accuracy</li>
                            <li data-translate="firebase"><strong>Firebase:</strong> Echtzeitdatenbank für Drops und User-Interaktionen</li>
                            <li data-translate="dev-area"><strong>Dev Area:</strong> Erweiterte Admin-Tools und Drop-Management</li>
                            <li data-translate="bonus-system"><strong>Bonus System:</strong> Daily rewards with special effects</li>
                            <li data-translate="pwa-support"><strong>PWA-Unterstützung:</strong> Installierbare Web-App für mobile Geräte</li>
                            <li data-translate="realtime-updates"><strong>Echtzeit-Updates:</strong> Live-Updates für alle App-Funktionen</li>
                        </ul>
                        
                        <h3 class="text-xl font-semibold text-white mb-4" data-translate="gameplay-title">🎮 Gameplay</h3>
                        <p class="text-gray-300 mb-4" data-translate="gameplay-desc">
                            Users navigate to GeoDrops, take photos of the location and receive rewards in the form of 
                            cryptocurrencies. The system prevents fraud through GPS validation and image analysis.
                        </p>
                        
                        <h3 class="text-xl font-semibold text-white mb-4" data-translate="security-title">🔒 Security</h3>
                        <ul class="text-gray-300 mb-4 list-disc list-inside">
                            <li data-translate="security-decentralized">Dezentrale Blockchain-Architektur</li>
                            <li data-translate="security-smart-contracts">Smart Contract-basierte Belohnungen</li>
                            <li data-translate="security-anti-cheat">Anti-Cheat-Systeme</li>
                            <li data-translate="security-encryption">Encrypted data transmission</li>
                        </ul>
                                        </div>
                                        </div>
                                        </div>
                                        </div>
                                    </div>
                                    
    <div id="roadmap-popup" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-white">🗺️ GeoDrop Roadmap</h2>
                        <button onclick="closeRoadmap()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
                                        </div>
                    <div class="space-y-6">
                        <div class="border-l-4 border-green-500 pl-4">
                            <h3 class="text-lg font-semibold text-green-400">✅ Phase 1 - Foundation (August 2025)</h3>
                            <ul class="text-gray-300 mt-2 list-disc list-inside">
                                <li>Basic GeoDrop functionality</li>
                                <li>User registration and authentication</li>
                                <li>GPS-based location determination</li>
                                <li>Image upload and validation</li>
                                <li>GeoChat System</li>
                            </ul>
                                        </div>
                        
                        <div class="border-l-4 border-green-500 pl-4">
                            <h3 class="text-lg font-semibold text-green-400">✅ Phase 2 - Blockchain Integration (September 2025)</h3>
                            <ul class="text-gray-300 mt-2 list-disc list-inside">
                                <li>Complete tBNB integration</li>
                                <li>PixelDrop Token System</li>
                                <li>Trading System (PixelDrop ↔ tBNB)</li>
                                <li>Mining Machines (4 types)</li>
                                <li>MetaMask Wallet Integration</li>
                            </ul>
                                        </div>
                        
                        <div class="border-l-4 border-green-500 pl-4">
                            <h3 class="text-lg font-semibold text-green-400">✅ Phase 3 - Advanced Features (September 2025)</h3>
                            <ul class="text-gray-300 mt-2 list-disc list-inside">
                                <li>Dev Area with admin tools</li>
                                <li>Drop numbering system</li>
                                <li>Consistency checks</li>
                                <li>Performance optimization</li>
                                <li>Mobile Responsiveness</li>
                                <li>Bonus system with special effects</li>
                                <li>PWA installation support</li>
                                <li>Real-time location updates</li>
                            </ul>
                                    </div>
                        
                        <div class="border-l-4 border-yellow-500 pl-4">
                            <h3 class="text-lg font-semibold text-yellow-400">⏳ Phase 4 - Future Development (Q4 2025)</h3>
                            <ul class="text-gray-300 mt-2 list-disc list-inside">
                                <li>Enhanced security features</li>
                                <li>Advanced Trading Analytics</li>
                                <li>Multi-chain support (Ethereum, Polygon)</li>
                                <li>Improved UX/UI</li>
                                <li>NFT integration for GeoDrops</li>
                                <li>Social Features & Leaderboards</li>
                                <li>Advanced Mining Algorithms</li>
                            </ul>
                                </div>
                        
                        <div class="border-l-4 border-purple-500 pl-4">
                            <h3 class="text-lg font-semibold text-purple-400">🔮 Phase 5 - Future Vision (2026)</h3>
                            <ul class="text-gray-300 mt-2 list-disc list-inside">
                                <li>AI-Powered GeoDrop Recommendations</li>
                                <li>AR/VR-Integration für immersive Erlebnisse</li>
                                <li>Cross-Platform Expansion (iOS/Android Apps)</li>
                                <li>Erweiterte Analytics & Machine Learning</li>
                                <li>Metaverse Integration</li>
                                <li>Global Community Events</li>
                                <li>Enterprise Solutions</li>
                            </ul>
                                </div>
                            </div>
                                        </div>
                                        </div>
                                        </div>
                                    </div>
                                    
    <div id="tokenomics-popup" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-white">💰 GeoDrop Tokenomics</h2>
                        <button onclick="closeTokenomics()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
                                    </div>
                    <div class="grid md:grid-cols-2 gap-6">
                                    <div>
                            <h3 class="text-xl font-semibold text-white mb-4">🪙 Token distribution</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center p-3 bg-gray-700 rounded">
                                    <span class="text-gray-300">Community rewards</span>
                                    <span class="text-green-400 font-bold">40%</span>
                                        </div>
                                <div class="flex justify-between items-center p-3 bg-gray-700 rounded">
                                    <span class="text-gray-300">Development team</span>
                                    <span class="text-blue-400 font-bold">20%</span>
                                    </div>
                                <div class="flex justify-between items-center p-3 bg-gray-700 rounded">
                                    <span class="text-gray-300">Liquidity pool</span>
                                    <span class="text-purple-400 font-bold">15%</span>
                                        </div>
                                <div class="flex justify-between items-center p-3 bg-gray-700 rounded">
                                    <span class="text-gray-300">Marketing & partnerships</span>
                                    <span class="text-yellow-400 font-bold">15%</span>
                                    </div>
                                <div class="flex justify-between items-center p-3 bg-gray-700 rounded">
                                    <span class="text-gray-300">Reserve fund</span>
                                    <span class="text-red-400 font-bold">10%</span>
                                </div>
                            </div>
                                    </div>
                                    
                        <div>
                            <h3 class="text-xl font-semibold text-white mb-4">💎 Reward system</h3>
                            <div class="space-y-3">
                                <div class="p-3 bg-gray-700 rounded">
                                    <h4 class="text-white font-semibold">Collect GeoDrops</h4>
                                    <p class="text-gray-300 text-sm">100 PixelDrops per drop (max)</p>
                                    </div>
                                <div class="p-3 bg-gray-700 rounded">
                                    <h4 class="text-white font-semibold">Daily bonus</h4>
                                    <p class="text-gray-300 text-sm">50 PixelDrops daily</p>
                                </div>
                                <div class="p-3 bg-gray-700 rounded">
                                    <h4 class="text-white font-semibold">Mining machines</h4>
                                    <p class="text-gray-300 text-sm">Passive income through 4 machine types</p>
                            </div>
                                <div class="p-3 bg-gray-700 rounded">
                                    <h4 class="text-white font-semibold">Referral program</h4>
                                    <p class="text-gray-300 text-sm">5% of your referrals' income</p>
                        </div>
                                <div class="p-3 bg-gray-700 rounded">
                                    <h4 class="text-white font-semibold">Trading rewards</h4>
                                    <p class="text-gray-300 text-sm">Rewards for active trading</p>
                        </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <h3 class="text-xl font-semibold text-white mb-4">📊 Token-Details</h3>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="p-4 bg-gray-700 rounded text-center">
                                <h4 class="text-white font-semibold">Total Supply</h4>
                                <p class="text-2xl text-green-400 font-bold">1,000,000,000</p>
                                <p class="text-gray-400 text-sm">PixelDrop Tokens</p>
                                </div>
                            <div class="p-4 bg-gray-700 rounded text-center">
                                <h4 class="text-white font-semibold">Current Price</h4>
                                <p class="text-2xl text-blue-400 font-bold">$0.001</p>
                                <p class="text-gray-400 text-sm">tBNB Pair</p>
                            </div>
                            <div class="p-4 bg-gray-700 rounded text-center">
                                <h4 class="text-white font-semibold">Market Cap</h4>
                                <p class="text-2xl text-purple-400 font-bold">$1,000,000</p>
                                <p class="text-gray-400 text-sm">Fully Diluted</p>
                        </div>
                        </div>
                        
                        <div class="mt-6 p-4 bg-gradient-to-r from-blue-900 to-purple-900 rounded-lg">
                            <h4 class="text-white font-semibold mb-2">🚀 Aktuelle Features</h4>
                            <div class="grid md:grid-cols-2 gap-4 text-sm">
                                <div>
                                    <p class="text-gray-300">✅ Live Trading System</p>
                                    <p class="text-gray-300">✅ 4 Mining-Maschinen-Typen</p>
                                    <p class="text-gray-300">✅ Daily Bonus System</p>
                                </div>
                                <div>
                                    <p class="text-gray-300">✅ Real-time GPS Tracking</p>
                                    <p class="text-gray-300">✅ PWA Installation</p>
                                    <p class="text-gray-300">✅ Dev Tools & Analytics</p>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>
            </div>
        </div>
    </div>

    <script>
        // Whitepaper, Roadmap und Tokenomics Funktionen
        function showWhitepaper() {
            document.getElementById('whitepaper-popup').classList.remove('hidden');
        }
        
        function closeWhitepaper() {
            document.getElementById('whitepaper-popup').classList.add('hidden');
        }
        
        function showRoadmap() {
            document.getElementById('roadmap-popup').classList.remove('hidden');
        }
        
        function closeRoadmap() {
            document.getElementById('roadmap-popup').classList.add('hidden');
        }
        
        function showTokenomics() {
            document.getElementById('tokenomics-popup').classList.remove('hidden');
        }
        
        function closeTokenomics() {
            document.getElementById('tokenomics-popup').classList.add('hidden');
        }
        
        // Close popups when clicking outside
        document.addEventListener('click', function(event) {
            if (event.target.classList.contains('fixed')) {
                event.target.classList.add('hidden');
            }
        });
        
        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('✅ Service Worker registered:', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('❌ Service Worker registration failed:', error);
                    });
            });
        }
        
        // PWA Install prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('📱 PWA install prompt available');
            e.preventDefault();
            deferredPrompt = e;
            
            // Show install button
            showInstallButton();
        });
        
        function showInstallButton() {
            // Check if already installed
            if (window.matchMedia('(display-mode: standalone)').matches) {
                console.log('📱 App already installed');
                return;
            }
            
            // Only show on mobile devices
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            if (!isMobile) {
                console.log('💻 Desktop browser detected - not showing install button');
                return;
            }
            
            console.log('📱 Mobile device detected - showing install button');
            
            // Create install button
            const installBtn = document.createElement('button');
            installBtn.innerHTML = `
                <div class="flex items-center space-x-2">
                    <span class="text-2xl">📱</span>
                    <div class="text-left">
                        <div class="font-bold text-sm">App installieren</div>
                        <div class="text-xs opacity-90">Für bessere Performance</div>
                    </div>
                </div>
            `;
            installBtn.className = 'fixed bottom-24 right-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-3 rounded-xl shadow-2xl z-50 hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 border border-blue-400';
            installBtn.onclick = () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    deferredPrompt.userChoice.then((choiceResult) => {
                        if (choiceResult.outcome === 'accepted') {
                            console.log('✅ PWA installed');
                            showInstallSuccess();
                        }
                        deferredPrompt = null;
                        installBtn.remove();
                    });
                }
            };
            
            // Add to page
            document.body.appendChild(installBtn);
            
            // Auto-hide after 15 seconds
            setTimeout(() => {
                if (document.body.contains(installBtn)) {
                    installBtn.style.transition = 'opacity 0.5s ease-out';
                    installBtn.style.opacity = '0';
                    setTimeout(() => {
                        if (document.body.contains(installBtn)) {
                            installBtn.remove();
                        }
                    }, 500);
                }
            }, 15000);
        }
        
        function showInstallSuccess() {
            const successMsg = document.createElement('div');
            successMsg.innerHTML = `
                <div class="flex items-center space-x-2">
                    <span class="text-2xl">✅</span>
                    <span class="font-bold">App erfolgreich installiert!</span>
                </div>
            `;
            successMsg.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-3 rounded-xl shadow-2xl z-50';
            document.body.appendChild(successMsg);
            
            setTimeout(() => {
                if (document.body.contains(successMsg)) {
                    document.body.removeChild(successMsg);
                }
            }, 3000);
        }
        
        // Mobile Navigation Enhancement
        function updateMobileNav() {
            const navButtons = document.querySelectorAll('.mobile-nav .nav-btn');
            navButtons.forEach(btn => {
                btn.classList.remove('active');
                const page = btn.getAttribute('data-page');
                if (page === window.currentPage) {
                    btn.classList.add('active');
                }
            });
        }
        
        // Enhanced showPage function for mobile
        const originalShowPage = window.showPage;
        window.showPage = function(pageId) {
            if (originalShowPage) {
                originalShowPage(pageId);
            }
            window.currentPage = pageId;
            updateMobileNav();
            
            // Update ad banner visibility when page changes
            setTimeout(() => {
                if (typeof window.updateAdBannerVisibility === 'function') {
                    window.updateAdBannerVisibility();
                }
            }, 100);
            
            // Add haptic feedback on mobile
            if ('vibrate' in navigator) {
                navigator.vibrate(50);
            }
        };
        
        // Mobile navigation will be initialized in the main DOMContentLoaded event
    </script>


    
    <style>
        @keyframes pulse {
            0% { opacity: 0.8; }
            50% { opacity: 1; }
            100% { opacity: 0.8; }
        }
        
        /* GeoBoard Tab Styles */
        .mehr-tab-btn {
            padding: 8px 16px;
            background-color: #374151;
            color: white;
            border-radius: 8px;
            border: 1px solid #4b5563;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }
        
        .mehr-tab-btn:hover {
            background-color: #4b5563;
            border-color: #6b7280;
        }
        
        .mehr-tab-btn.active {
            background-color: #3b82f6;
            border-color: #2563eb;
            color: white;
        }
        
        .mehr-tab-btn.active:hover {
            background-color: #2563eb;
        }
        
        
    </style>




    <nav class="mobile-nav">
        <a href="#" class="nav-btn active" onclick="showPage('startseite')" data-page="startseite">
            <div class="nav-icon">🏠</div>
            <span class="nav-label">Start</span>
            <div class="nav-indicator"></div>
        </a>
        <a href="#" class="nav-btn" onclick="showPage('geocard')" data-page="geocard">
            <div class="nav-icon">🗺️</div>
            <span class="nav-label">GeoCard</span>
            <div class="nav-indicator"></div>
        </a>
        <a href="#" class="nav-btn" onclick="showPage('geoboard')" data-page="geoboard">
            <div class="nav-icon">📊</div>
            <span class="nav-label">Board</span>
            <div class="nav-indicator"></div>
        </a>
        <a href="#" class="nav-btn" onclick="showPage('machines')" data-page="machines">
            <div class="nav-icon">⛏️</div>
            <span class="nav-label">Mining</span>
            <div class="nav-indicator"></div>
        </a>
        <a href="#" class="nav-btn" onclick="showPage('bonus')" data-page="bonus">
            <div class="nav-icon">🎁</div>
            <span class="nav-label">Bonus</span>
            <div class="nav-indicator"></div>
        </a>
        <a href="#" class="nav-btn" onclick="showPage('trading')" data-page="trading">
            <div class="nav-icon">📈</div>
            <span class="nav-label">Trading</span>
            <div class="nav-indicator"></div>
        </a>
        <a href="#" class="nav-btn" onclick="showPage('geochat')" data-page="geochat">
            <div class="nav-icon">💬</div>
            <span class="nav-label">Chat</span>
            <div class="nav-indicator"></div>
        </a>
        <a href="#" class="nav-btn" onclick="showPage('mehr')" data-page="mehr">
            <div class="nav-icon">⚙️</div>
            <span class="nav-label">Mehr</span>
            <div class="nav-indicator"></div>
        </a>
        <a href="#" class="nav-btn" onclick="showTokenomics()" data-page="tokenomics">
            <div class="nav-icon">💰</div>
            <span class="nav-label">Tokenomics</span>
            <div class="nav-indicator"></div>
        </a>
        <a href="#" class="nav-btn" onclick="showDevLoginPopup();" data-page="dev">
            <div class="nav-icon">🔧</div>
            <span class="nav-label">Dev</span>
            <div class="nav-indicator"></div>
        </a>
    </nav>

    <script>
        // Control ad banner visibility based on current page
        window.updateAdBannerVisibility = function() {
            const adBanner = document.getElementById('ad-banner');
            const bottomAdBanner = document.getElementById('bottom-ad-banner');
            const currentPage = document.querySelector('.page.active');
            
            if (adBanner && bottomAdBanner && currentPage) {
                const isMobile = window.innerWidth <= 768;
                const isStartseite = currentPage.id === 'startseite';
                
                if (isMobile) {
                    // On mobile: only show on startseite
                    if (isStartseite) {
                        // Top banner
                        adBanner.style.display = 'flex';
                        adBanner.style.position = 'fixed';
                        adBanner.style.top = '0';
                        adBanner.style.left = '0';
                        adBanner.style.right = '0';
                        adBanner.style.zIndex = '50';
                        
                        // Bottom banner
                        bottomAdBanner.style.display = 'flex';
                        bottomAdBanner.style.position = 'fixed';
                        bottomAdBanner.style.bottom = '0';
                        bottomAdBanner.style.left = '0';
                        bottomAdBanner.style.right = '0';
                        bottomAdBanner.style.zIndex = '50';
                    } else {
                        adBanner.style.display = 'none';
                        bottomAdBanner.style.display = 'none';
                    }
                } else {
                    // On desktop: always show
                    // Top banner
                    adBanner.style.display = 'flex';
                    adBanner.style.position = 'fixed';
                    adBanner.style.top = '0';
                    adBanner.style.left = '0';
                    adBanner.style.right = '0';
                    adBanner.style.zIndex = '50';
                    
                    // Bottom banner
                    bottomAdBanner.style.display = 'flex';
                    bottomAdBanner.style.position = 'fixed';
                    bottomAdBanner.style.bottom = '0';
                    bottomAdBanner.style.left = '0';
                    bottomAdBanner.style.right = '0';
                    bottomAdBanner.style.zIndex = '50';
                }
                
                console.log(`📱 Ad banners visibility updated: mobile=${isMobile}, startseite=${isStartseite}, top=${adBanner.style.display}, bottom=${bottomAdBanner.style.display}`);
            }
        };

        // Initialize landing page logic
        window.initializeLandingPage = function() {
            console.log('🔄 Initializing landing page...');
            
            // Check if user is logged in
            const currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null');
            const userProfile = JSON.parse(localStorage.getItem('userProfile') || 'null');
            
            console.log('👤 Current user:', currentUser);
            console.log('📋 User profile:', userProfile);
            
            // Also check Firebase auth state
            if (typeof firebase !== 'undefined' && firebase.auth && firebase.auth().currentUser) {
                console.log('🔥 Firebase auth user found:', firebase.auth().currentUser.email);
                // User is logged in via Firebase - hide landing page, show user info
                const landingContent = document.getElementById('landing-content');
                const userInfo = document.getElementById('user-info');
                
                if (landingContent) {
                    landingContent.style.display = 'none';
                    landingContent.style.visibility = 'hidden';
                    console.log('🚫 Landing page HIDDEN (Firebase)');
                }
                if (userInfo) {
                    userInfo.style.display = 'block';
                    userInfo.style.visibility = 'visible';
                    console.log('👤 User info SHOWN (Firebase)');
                }
                
                if (typeof updateUserDisplay === 'function') {
                    updateUserDisplay();
                }
                return;
            }
            
            if (currentUser && userProfile) {
                console.log('✅ User is logged in - hiding landing page');
                // User is logged in - hide landing page, show user info
                const landingContent = document.getElementById('landing-content');
                const userInfo = document.getElementById('user-info');
                
                if (landingContent) {
                    landingContent.style.display = 'none';
                    landingContent.style.visibility = 'hidden';
                    console.log('🚫 Landing page HIDDEN');
                }
                if (userInfo) {
                    userInfo.style.display = 'block';
                    userInfo.style.visibility = 'visible';
                    console.log('👤 User info SHOWN');
                }
                
                if (typeof updateUserDisplay === 'function') {
                    updateUserDisplay();
                }
            } else {
                console.log('❌ User is not logged in - showing landing page');
                // User is not logged in - show landing page, hide user info
                const landingContent = document.getElementById('landing-content');
                const userInfo = document.getElementById('user-info');
                
                if (landingContent) {
                    landingContent.style.display = 'block';
                    landingContent.style.visibility = 'visible';
                    console.log('🌐 Landing page shown');
                }
                if (userInfo) {
                    userInfo.style.display = 'none';
                    userInfo.style.visibility = 'hidden';
                    console.log('👤 User info hidden');
                }
            }
        };

        // Show registration form
        window.showRegistrationForm = function() {
            // Scroll to the registration section
            document.getElementById('registration-section').scrollIntoView({ behavior: 'smooth' });
            
            // Switch to registration mode
            setTimeout(() => {
                const isLogin = document.getElementById('form-title').textContent.includes('Anmelden');
                
                if (isLogin) {
                    // Switch to registration mode
                    document.getElementById('form-title').textContent = translations[currentLang]['register-now'];
                    document.getElementById('form-subtitle').textContent = translations[currentLang]['create-account'];
                    document.getElementById('username-field').style.display = 'block';
                    document.getElementById('referral-field').style.display = 'block'; // Show referral field for registration
                    document.getElementById('main-button').innerHTML = '<i class="fas fa-user-plus mr-2"></i>' + translations[currentLang]['register-free'];
                    document.getElementById('main-button').onclick = registerFromLanding;
                    document.getElementById('main-button').className = 'w-full bg-gradient-to-r from-green-600 to-emerald-600 px-6 py-4 rounded-lg text-center font-semibold hover:from-green-700 hover:to-emerald-700 transition-all';
                    document.querySelector('p.text-sm.text-gray-300.text-center').innerHTML = '<span data-translate="already-registered-text">' + translations[currentLang]['already-registered-text'] + '</span> <button onclick="toggleForm()" class="text-blue-400 hover:text-blue-300" data-translate="login-here">' + translations[currentLang]['login-here'] + '</button>';
                }
            }, 500); // Wait for scroll to complete
        };

        // Show login form
        window.showLoginForm = function() {
            // Scroll to the registration section (which contains both login and registration)
            document.getElementById('registration-section').scrollIntoView({ behavior: 'smooth' });
            
            // Switch to login mode
            setTimeout(() => {
                const isLogin = document.getElementById('form-title').textContent.includes('Anmelden');
                
                if (!isLogin) {
                    // Switch to login mode
                    document.getElementById('form-title').textContent = translations[currentLang]['login-title'];
                    document.getElementById('form-subtitle').textContent = translations[currentLang]['welcome-back'];
                    document.getElementById('username-field').style.display = 'none';
                    document.getElementById('referral-field').style.display = 'none'; // Hide referral field for login
                    document.getElementById('main-button').innerHTML = '<i class="fas fa-sign-in-alt mr-2"></i>' + translations[currentLang]['login-button'];
                    document.getElementById('main-button').onclick = loginFromLanding;
                    document.getElementById('main-button').className = 'w-full bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4 rounded-lg text-center font-semibold hover:from-blue-700 hover:to-purple-700 transition-all';
                    document.querySelector('p.text-sm.text-gray-300.text-center').innerHTML = 'Noch kein Account? <button onclick="toggleForm()" class="text-blue-400 hover:text-blue-300">Hier zur Registrierung</button>';
                }
            }, 500); // Wait for scroll to complete
        };

        // Handle Enter key press - check if we're in login or registration mode
        window.handleEnterKey = function() {
            const isLoginMode = document.getElementById('username-field').style.display === 'none';
            
            if (isLoginMode) {
                // We're in login mode - call login function
                console.log('🔑 Enter pressed in login mode - calling loginFromLanding()');
                loginFromLanding();
            } else {
                // We're in registration mode - call register function
                console.log('🚀 Enter pressed in registration mode - calling registerFromLanding()');
                registerFromLanding();
            }
        };

        // Toggle between registration and login
        window.toggleForm = function() {
            const isLogin = document.getElementById('form-title').textContent.includes('Anmelden');
            
            if (isLogin) {
                // Switch to registration
                document.getElementById('form-title').textContent = translations[currentLang]['register-now'];
                document.getElementById('form-subtitle').textContent = translations[currentLang]['create-account'];
                document.getElementById('username-field').style.display = 'block';
                document.getElementById('referral-field').style.display = 'block'; // Show referral field for registration
                document.getElementById('main-button').innerHTML = '<i class="fas fa-user-plus mr-2"></i>' + translations[currentLang]['register-free'];
                document.getElementById('main-button').onclick = registerFromLanding;
                document.getElementById('main-button').className = 'w-full bg-gradient-to-r from-green-600 to-emerald-600 px-6 py-4 rounded-lg text-center font-semibold hover:from-green-700 hover:to-emerald-700 transition-all';
                document.querySelector('p.text-sm.text-gray-300.text-center').innerHTML = '<span data-translate="already-registered-text">' + translations[currentLang]['already-registered-text'] + '</span> <button onclick="toggleForm()" class="text-blue-400 hover:text-blue-300" data-translate="login-here">' + translations[currentLang]['login-here'] + '</button>';
            } else {
                // Switch to login
                document.getElementById('form-title').textContent = translations[currentLang]['login-title'];
                document.getElementById('form-subtitle').textContent = translations[currentLang]['welcome-back'];
                document.getElementById('username-field').style.display = 'none';
                document.getElementById('referral-field').style.display = 'none'; // Hide referral field for login
                // No referral field to hide
                document.getElementById('main-button').innerHTML = '<i class="fas fa-sign-in-alt mr-2"></i>Anmelden';
                document.getElementById('main-button').onclick = loginFromLanding;
                document.getElementById('main-button').className = 'w-full bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4 rounded-lg text-center font-semibold hover:from-blue-700 hover:to-purple-700 transition-all';
                document.querySelector('p.text-sm.text-gray-300.text-center').innerHTML = 'Noch kein Account? <button onclick="toggleForm()" class="text-blue-400 hover:text-blue-300">Hier zur Registrierung</button>';
            }
        };

        // Scroll to features
        window.scrollToFeatures = function() {
            document.getElementById('features').scrollIntoView({ behavior: 'smooth' });
        };

        // Go to app after successful registration
        window.goToApp = function() {
            // Hide landing content and show user info
            document.getElementById('landing-content').style.display = 'none';
            document.getElementById('user-info').style.display = 'block';
            if (typeof updateUserDisplay === 'function') {
                updateUserDisplay();
            }
        };

        // Registration function for landing page
        window.registerFromLanding = async function() {
            const username = document.getElementById('reg-username').value.trim();
            const email = document.getElementById('reg-email').value.trim();
            const password = document.getElementById('reg-password').value;
            const referralId = '';
            
            // Check if we're in login mode (username field is hidden)
            const isLoginMode = document.getElementById('username-field').style.display === 'none';
            
            if (isLoginMode) {
                // We're in login mode, but user clicked register button - switch to register mode
                toggleForm();
                return;
            }
            
            // Validation for registration
            if (!username || !email || !password) {
                alert('Bitte fülle alle Felder aus!');
                return;
            }
            
            if (password.length < 6) {
                alert('Passwort muss mindestens 6 Zeichen haben!');
                return;
            }
            
            try {
                console.log('🚀 Landing page registration attempt for:', email);
                
                // Check if Firebase auth is available
                if (!window.auth) {
                    console.error('❌ Firebase Auth not available');
                    alert('Firebase Auth nicht verfügbar. Bitte Seite neu laden.');
                    return;
                }
                
                // Direct Firebase registration
                const userCredential = await window.auth.createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                console.log('✅ Firebase user created:', user.uid);
                
                // Check for referral code from localStorage
                const referralCode = localStorage.getItem('referralCode') || '2b2MBGHgaDTcSOaMzepTnGK2JVz1';
                let initialCoins = 100;
                
                // Create user profile
                const userProfile = {
                    email: email,
                    username: username,
                    level: 1,
                    coins: initialCoins,
                    drops: 0,
                    boost: 1.0,
                    ownedMachines: {},
                    createdAt: window.firebase.firestore.FieldValue.serverTimestamp(),
                    lastLogin: window.firebase.firestore.FieldValue.serverTimestamp()
                };
                
                // Apply referral tracking (always track referrer, but bonus only for non-default)
                userProfile.referredBy = referralCode;
                userProfile.referralBonus = referralCode !== '2b2MBGHgaDTcSOaMzepTnGK2JVz1' ? 50 : 0;
                userProfile.coins = initialCoins + (referralCode !== '2b2MBGHgaDTcSOaMzepTnGK2JVz1' ? 50 : 0); // Bonus coins only for non-default referrals
                console.log('🎯 Applying referral tracking for:', referralCode);
                
                // Save user profile to Firestore
                await window.db.collection('users').doc(user.uid).set(userProfile);
                
                console.log('✅ User profile saved to Firestore:', user.uid);
                alert('✅ Registrierung erfolgreich! Willkommen bei GeoDrop!');
                
                // Clear referral code from localStorage after successful registration
                localStorage.removeItem('referralCode');
                localStorage.removeItem('referralTimestamp');
                
                // Update UI
                if (typeof updateUserDisplay === 'function') {
                    updateUserDisplay();
                }
                
                // Hide landing page and show user info
                const landingContent = document.getElementById('landing-content');
                const userInfo = document.getElementById('user-info');
                
                if (landingContent) {
                    landingContent.style.display = 'none';
                    landingContent.style.visibility = 'hidden';
                    console.log('🚫 Landing page HIDDEN after registration');
                }
                if (userInfo) {
                    userInfo.style.display = 'block';
                    userInfo.style.visibility = 'visible';
                    console.log('👤 User info SHOWN after registration');
                }
                
                // Update navigation
                setTimeout(() => {
                    if (typeof window.updateNavigationDevStatus === 'function') {
                        window.updateNavigationDevStatus();
                    }
                    if (typeof window.updateUserNavigation === 'function') {
                        window.updateUserNavigation();
                    }
                    if (typeof window.updateAdBannerVisibility === 'function') {
                        window.updateAdBannerVisibility();
                    }
                }, 500);
                
            } catch (error) {
                console.error('❌ Landing page registration error:', error);
                let errorMessage = 'Registrierung fehlgeschlagen';
                
                if (error.code === 'auth/email-already-in-use') {
                    errorMessage = 'E-Mail bereits registriert';
                } else if (error.code === 'auth/weak-password') {
                    errorMessage = 'Passwort zu schwach';
                } else if (error.code === 'auth/invalid-email') {
                    errorMessage = 'Ungültige E-Mail';
                } else if (error.code === 'auth/network-request-failed') {
                    errorMessage = 'Netzwerkfehler. Bitte Internetverbindung prüfen';
                }
                
                alert(`❌ ${errorMessage}`);
            }
        };

        // Login function for landing page
        window.loginFromLanding = async function() {
            const email = document.getElementById('reg-email').value.trim();
            const password = document.getElementById('reg-password').value;
            
            // Validation
            if (!email || !password) {
                alert('Bitte E-Mail und Passwort eingeben!');
                return;
            }
            
            try {
                console.log('🔐 Landing page login attempt for:', email);
                
                // Check if Firebase auth is available
                if (!window.auth) {
                    console.error('❌ Firebase Auth not available');
                    alert('Firebase Auth nicht verfügbar. Bitte Seite neu laden.');
                    return;
                }
                
                // Direct Firebase login without temporary fields
                const userCredential = await window.auth.signInWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                console.log('✅ Landing page login successful:', user.email);
                alert('✅ Erfolgreich angemeldet!');
                
                // Update UI
                if (typeof updateUserDisplay === 'function') {
                    updateUserDisplay();
                }
                
                // Hide landing page and show user info
                const landingContent = document.getElementById('landing-content');
                const userInfo = document.getElementById('user-info');
                
                if (landingContent) {
                    landingContent.style.display = 'none';
                    landingContent.style.visibility = 'hidden';
                    console.log('🚫 Landing page HIDDEN after login');
                }
                if (userInfo) {
                    userInfo.style.display = 'block';
                    userInfo.style.visibility = 'visible';
                    console.log('👤 User info SHOWN after login');
                }
                
                // Update navigation
                setTimeout(() => {
                    if (typeof window.updateNavigationDevStatus === 'function') {
                        window.updateNavigationDevStatus();
                    }
                    if (typeof window.updateUserNavigation === 'function') {
                        window.updateUserNavigation();
                    }
                    if (typeof window.updateAdBannerVisibility === 'function') {
                        window.updateAdBannerVisibility();
                    }
                }, 500);
                
            } catch (error) {
                console.error('❌ Landing page login error:', error);
                let errorMessage = 'Anmeldung fehlgeschlagen';
                
                if (error.code === 'auth/user-not-found') {
                    errorMessage = 'Benutzer nicht gefunden';
                } else if (error.code === 'auth/wrong-password') {
                    errorMessage = 'Falsches Passwort';
                } else if (error.code === 'auth/invalid-email') {
                    errorMessage = 'Ungültige E-Mail';
                } else if (error.code === 'auth/too-many-requests') {
                    errorMessage = 'Zu viele Versuche. Bitte später erneut versuchen';
                } else if (error.code === 'auth/network-request-failed') {
                    errorMessage = 'Netzwerkfehler. Bitte Internetverbindung prüfen';
                } else if (error.code === 'auth/invalid-credential') {
                    errorMessage = 'Ungültige Anmeldedaten';
                }
                
                alert(`❌ ${errorMessage}`);
            }
        };

        // Manual function to hide landing page (for debugging)
        window.hideLandingPage = function() {
            console.log('🔧 Manually hiding landing page...');
            const landingContent = document.getElementById('landing-content');
            const userInfo = document.getElementById('user-info');
            
            if (landingContent) {
                landingContent.style.display = 'none';
                console.log('🚫 Landing content manually hidden');
            }
            if (userInfo) {
                userInfo.style.display = 'block';
                console.log('👤 User info manually shown');
            }
        };
    </script>
    
    <div id="indirect-referrals-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-gray-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-white">🔄 Indirekte Referrals</h3>
                <button onclick="closeIndirectReferralsModal()" class="text-gray-400 hover:text-white text-2xl">
                    ×
                </button>
            </div>
            
            <div class="mb-4">
                <p class="text-gray-300 text-sm">
                    Diese Liste zeigt alle User, die von deinen direkten Referrals geworben wurden. 
                    Du erhältst 1% von deren Käufen.
                </p>
            </div>
            
            <div id="indirect-referrals-list" class="space-y-3">
                <div class="text-center text-gray-400 p-8">Lade indirekte Referrals...</div>
            </div>
        </div>
    </div>

    
    </script>
    
    <script>
        // Update GeoBoard statistics with real data from Firebase
        function updateGeoBoardStats() {
            console.log('📊 Updating GeoBoard statistics from Firebase...');
            
            // Load real data from Firebase Authentication and Firestore
            if (window.db && window.auth) {
                const user = window.auth.currentUser;
                if (user) {
                    const userRef = window.db.collection('users').doc(user.uid);
                    
                    userRef.get().then((doc) => {
                        if (doc.exists) {
                            const userData = doc.data();
                            const stats = {
                                coins: userData.coins || userData.pixelDrops || userData.totalCoins || '0',
                                tbnb: userData.tbnb || userData.bnb || userData.totalTBNB || '0.00',
                                drops: userData.drops || userData.totalDrops || userData.dropsCount || '0',
                                boost: userData.boost || userData.multiplier || userData.boostLevel || '1.0x',
                                packages: userData.packages || userData.totalPackages || userData.packagesBought || '0'
                            };
                            
                            // Update DOM elements
                            const elements = {
                                'stats-coins': stats.coins,
                                'stats-tbnb': stats.tbnb + ' tBNB',
                                'stats-drops': stats.drops,
                                'stats-boost': stats.boost,
                                'global-packages': stats.packages
                            };
                            
                            Object.entries(elements).forEach(([id, value]) => {
                                const element = document.getElementById(id);
                                if (element) {
                                    element.textContent = value;
                                }
                            });
                            
                            console.log('✅ GeoBoard statistics loaded from Firebase:', stats);
                        } else {
                            console.log('❌ User document not found in Firebase');
                        }
                    }).catch((error) => {
                        console.error('❌ Error loading GeoBoard stats from Firebase:', error);
                    });
                } else {
                    console.log('❌ No authenticated user found');
                }
            } else {
                console.log('❌ Firebase not available');
            }
        }

        // Update Referral statistics with real data from Firebase
        // Update Referral statistics with real data from Firebase - KORREKTE VERSION
        function updateReferralStats() {
            console.log('📊 Updating Referral statistics from Firebase - KORREKTE VERSION...');
            
            if (window.db && window.auth) {
                const user = window.auth.currentUser;
                if (user) {
                    console.log('🔍 Current user UID:', user.uid);
                    
                    // 1. ZÄHLE DIREKTE REFERRALS: User mit referredBy == currentUser.uid
                    window.db.collection('users')
                        .where('referredBy', '==', user.uid)
                        .get()
                        .then((directRefsSnapshot) => {
                            const directReferrals = directRefsSnapshot.size;
                            console.log('✅ Direkte Referrals gefunden:', directReferrals);
                            
                            let indirectReferrals = 0;
                            let activeReferrals = 0;
                            let totalEarnings = 0;
                            
                            // 2. ZÄHLE INDIREKTE REFERRALS: Für jeden direkten Referral, zähle seine Referrals
                            const indirectPromises = [];
                            directRefsSnapshot.forEach((directRefDoc) => {
                                const directRefId = directRefDoc.id;
                                const directRefData = directRefDoc.data();
                                
                                // Zähle aktive direkte Referrals (die gekauft haben)
                                if (directRefData.totalSpent && directRefData.totalSpent > 0) {
                                    activeReferrals++;
                                    totalEarnings += directRefData.totalSpent * 0.05; // 5% für direkte
                                    console.log('💰 Direkter Referral gekauft:', directRefData.totalSpent, 'tBNB');
                                }
                                
                                // Zähle indirekte Referrals (Referrals der direkten Referrals)
                                indirectPromises.push(
                                    window.db.collection('users')
                                        .where('referredBy', '==', directRefId)
                                        .get()
                                        .then((indirectRefsSnapshot) => {
                                            indirectReferrals += indirectRefsSnapshot.size;
                                            console.log('🔍 Indirekte Referrals für', directRefId, ':', indirectRefsSnapshot.size);
                                            
                                            // Zähle aktive indirekte Referrals
                                            indirectRefsSnapshot.forEach((indirectRefDoc) => {
                                                const indirectData = indirectRefDoc.data();
                                                if (indirectData.totalSpent && indirectData.totalSpent > 0) {
                                                    activeReferrals++;
                                                    totalEarnings += indirectData.totalSpent * 0.01; // 1% für indirekte
                                                    console.log('💰 Indirekter Referral gekauft:', indirectData.totalSpent, 'tBNB');
                                                }
                                            });
                                        })
                                );
                            });
                            
                            // 3. WARTE AUF ALLE INDIREKTEN REFERRALS UND UPDATE DOM
                            Promise.all(indirectPromises).then(() => {
                                const referralStats = {
                                    directReferrals: directReferrals.toString(),
                                    indirectReferrals: indirectReferrals.toString(),
                                    activeReferrals: activeReferrals.toString(),
                                    referralEarnings: totalEarnings.toFixed(2),
                                    totalReferralEarnings: totalEarnings.toFixed(2)
                                };
                                
                                console.log('📊 FINALE REFERRAL STATISTIKEN:', referralStats);
                                
                                // Update DOM elements
                                const referralElements = {
                                    'direct-referrals': referralStats.directReferrals,
                                    'indirect-referrals-count': referralStats.indirectReferrals,
                                    'active-referrals': referralStats.activeReferrals,
                                    'referral-earnings': referralStats.referralEarnings + ' tBNB',
                                    'total-referral-earnings': referralStats.totalReferralEarnings + ' tBNB'
                                };
                                
                                Object.entries(referralElements).forEach(([id, value]) => {
                                    const element = document.getElementById(id);
                                    if (element) {
                                        element.textContent = value;
                                        console.log('✅ Updated', id, 'to:', value);
                                    }
                                });
                                
                                console.log('✅ Referral statistics KORREKT geladen aus Firebase:', referralStats);
                            });
                        })
                        .catch((error) => {
                            console.error('❌ Error loading referral stats from Firebase:', error);
                        });
                } else {
                    console.log('❌ No authenticated user found');
                }
            } else {
                console.log('❌ Firebase database not available');
            }
        }

        // Load real referrals list from Firebase
        function loadReferralsFromFirebase() {
            console.log('👥 Loading referrals list from Firebase...');
            
            if (window.db && window.auth) {
                const user = window.auth.currentUser;
                if (user) {
                    // Load users who were referred by current user
                    window.db.collection('users')
                        .where('referredBy', '==', user.uid)
                        .get()
                        .then((querySnapshot) => {
                            const referralsList = document.getElementById('referrals-list');
                            if (referralsList) {
                                if (querySnapshot.empty) {
                                    referralsList.innerHTML = '<div class="text-center text-gray-400 p-8" data-translate="referrals.no-referrals">Noch keine Referrals</div>';
                                } else {
                                    let html = '';
                                    querySnapshot.forEach((doc) => {
                                        const referralData = doc.data();
                                        html += `
                                            <div class="bg-gray-600 rounded-lg p-4 mb-3">
                                                <div class="flex justify-between items-center">
                                                    <div>
                                                        <span class="text-white font-semibold">${referralData.email || referralData.username || 'User'}</span>
                                                        <span class="text-gray-400 text-sm ml-2">${new Date(referralData.createdAt?.toDate()).toLocaleDateString() || 'Unbekannt'}</span>
                                                    </div>
                                                    <div class="text-green-400 font-bold">
                                                        ${referralData.totalSpent || '0.00'} tBNB
                                                    </div>
                                                </div>
                                            </div>
                                        `;
                                    });
                                    referralsList.innerHTML = html;
                                }
                            }
                            console.log('✅ Referrals list loaded from Firebase:', querySnapshot.size, 'referrals');
                        })
                        .catch((error) => {
                            console.error('❌ Error loading referrals from Firebase:', error);
                        });
                }
            }
        }

        // Auto-update stats every 30 seconds
        function startStatsAutoUpdate() {
            updateGeoBoardStats();
            updateReferralStats();
            loadReferralsFromFirebase();
            setInterval(() => {
                updateGeoBoardStats();
                updateReferralStats();
                loadReferralsFromFirebase();
            }, 30000); // Update every 30 seconds
        }

        // Start auto-update when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(startStatsAutoUpdate, 2000);
            
            // Auto-load drops for GeoCard when page loads
            setTimeout(() => {
                if (typeof window.autoLoadDropsForUpload === 'function') {
                    window.autoLoadDropsForUpload();
                }
            }, 3000);
        });
    </script>
    
    <!-- Public Place Validator -->
    <script src="js/public-place-validator.js"></script>
    
</body>
</html>
